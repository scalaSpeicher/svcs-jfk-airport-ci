import{J as H,r as P,i as J,q as B,k as I,v as Z,O as D,c as q,w as f,o as d,a as o,t as u,l as b,m as G,u as a,d as r,y as $,F as k,g as w,b as c,f as j}from"./app-262a2786.js";import{_ as K}from"./PrimaryButton-a709ea04.js";import{_ as Q}from"./SecondaryButton-d3277a63.js";import{_ as p}from"./TextInput-bbe8df5b.js";import{_ as R}from"./FormSectionWide-371a92bf.js";import"./_plugin-vue_export-helper-c27b6911.js";const W={id:"alertnotification",class:"flex justify-end items-center scala-alert text-white text-sm font-bold px-4 py-3",role:"alert"},X=o("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[o("path",{d:"M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z"})],-1),Y=["innerHTML"],ee={class:"px-4 py-3 justify-end"},te=o("title",null,"Close",-1),oe=o("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"},null,-1),le=[te,oe],se={key:0,id:"PlannerAddForm"},ae={class:"min-w-full divide-y divide-gray-200 border-separate"},ne=o("thead",{class:"bg-gray-200 border"},[o("tr",null,[o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Check-In Desk "),o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Flight Identity "),o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Plan Open Date "),o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Plan Close Date "),o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Actual Open Date "),o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Actual Close Date "),o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Class Code ")])],-1),de={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},ce=["value"],re={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},ie={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},pe={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},ue={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},me={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},_e={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},he={key:1,id:"PlannerEditForm"},fe={class:"min-w-full divide-y divide-gray-200 border-separate"},ye={class:"bg-gray-200 border"},ge=o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Check-In Desk ",-1),xe=o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Flight Identity ",-1),be=o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Open Date ",-1),ke=o("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Close Date ",-1),we={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},ve=["id"],Ce=["id"],Ve=["id"],Ee={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},Ue={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},Me={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},Oe=["id","onUpdate:modelValue"],Pe=["value"],Be={href:"/planners"},Ie=o("span",{style:{width:"20px"}},null,-1),Te={__name:"EditPlannersForm",props:{planners:{type:Object,default:()=>({})},checkinDesks:{type:Array,default:()=>[]},airlineLabels:{type:Object,default:()=>({})},canEditPlanners:{type:Boolean,default:()=>!1},formMode:{type:String,default:()=>""}},setup(v){const C=v,V=H(),y=P(!1);let g=P("");const x=J({get(){return g.value?g.value:V.props.flash.message},set(t){g.value=t}}),E=()=>{y.value=!0,document.getElementById("alertnotification")&&(document.getElementById("alertnotification").style="display:justify;")},F=()=>{y.value=!1,document.getElementById("alertnotification")&&(document.getElementById("alertnotification").style="display:none;")};B(V.props,function(t){t!=null&&t.flashMessage&&E()},{immediate:!0,deep:!0}),B(x,(t,l)=>{t&&E()},{immediate:!0,deep:!0});const _=I({}),U=I([]),n=Z({checkindesk:"",flight_identity:"",checkin_plan_open_date_time:"",checkin_plan_close_date_time:"",checkin_open_date_time:"",checkin_close_date_time:"",class_code:""}),S=()=>{C.formMode=="edit"?(Object.keys(_).forEach(function(l){let e={};e.id=l;let s=C.planners.find(O=>O.id==l);e.converted_open=s.converted_open,e.converted_close=s.converted_close;let i=_[l];Object.keys(i).forEach(function(m){m=="converted_open"||m=="converted_close"?e[m].value=i[m]:e[m]=i[m]}),U.push(e)}),D.put(route("planners.update",JSON.stringify(U)),{preserveScroll:!0})):n.post(route("planners.store"),{preserveScroll:!0})},h=t=>{let l=t.target.id.split("-")[1],e=[];e[t.target.name]=t.target.value,Object.keys(_).includes(l)?_[l][t.target.name]=t.target.value:(_[l]=e,document.getElementById(l).classList.add("planner-row-color-changed"))},L=t=>{h(t)},T=t=>{h(t)},A=t=>{let l=t.target.oldvalue;typeof t.key>"u"?(t.target.value=t.target.value.replace(/[^A-Za-z0-9.]/gi,"").toUpperCase(),t.target.value!=l&&h(t)):(t.key.length==1&&(t.preventDefault(),t.target.value=t.key.replace(/[^A-Za-z0-9.]/gi,"").toUpperCase()),t.target.value!=l&&h(t))};let M=[];const N=t=>{let l="";return typeof t=="object"?(l+="Problem updating planners! (records with issues marked in red)<br/>",Object.entries(t).forEach(e=>{const[s,i]=e;M.push(s),l+=i}),l):t},z=t=>{t.forEach(l=>{document.getElementById(l)!==null&&(document.getElementById(l).className="planner-row-color-error")})};return D.on("success",()=>{z(M)}),(t,l)=>(d(),q(R,{onSubmitted:S},{title:f(()=>[o("span",null,u(t.$page.props.formMode==="add"?"New Planner":t.$page.props.planners.length>1?"Bulk Update Planners":"Update Planner"),1)]),form:f(()=>[b(o("div",W,[X,o("p",{innerHTML:a(x)?N(a(x)):""},null,8,Y),o("span",ee,[(d(),r("svg",{class:"fill-current h-6 w-6 text-indigo-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",onClick:l[0]||(l[0]=e=>F())},le))])],512),[[G,y.value]]),t.$page.props.formMode==="add"?(d(),r("div",se,[o("table",ae,[ne,o("tbody",null,[o("tr",null,[o("td",de,[b(o("select",{id:"checkindesk","onUpdate:modelValue":l[1]||(l[1]=e=>a(n).checkindesk=e),name:"checkindesk",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm planners-edit-class-code-input",style:{width:"100px"}},[(d(!0),r(k,null,w(t.$page.props.checkinDesks,(e,s)=>(d(),r("option",{key:s,value:e},u(e),9,ce))),128))],512),[[$,a(n).checkindesk]])]),o("td",re,[c(p,{id:"flight_identity",modelValue:a(n).flight_identity,"onUpdate:modelValue":l[2]||(l[2]=e=>a(n).flight_identity=e),name:"flight_identity",type:"text",class:"block w-full",autocomplete:"Flight ID",style:{width:"100px"}},null,8,["modelValue"])]),o("td",ie,[c(p,{id:"checkin_plan_open_date_time",modelValue:a(n).checkin_plan_open_date_time,"onUpdate:modelValue":l[3]||(l[3]=e=>a(n).checkin_plan_open_date_time=e),name:"checkin_plan_open_date_time",type:"datetime-local",class:"block w-full",autocomplete:"Plan Open Time",style:{width:"125px"}},null,8,["modelValue"])]),o("td",pe,[c(p,{id:"checkin_plan_close_date_time",modelValue:a(n).checkin_plan_close_date_time,"onUpdate:modelValue":l[4]||(l[4]=e=>a(n).checkin_plan_close_date_time=e),name:"checkin_plan_close_date_time",type:"datetime-local",class:"block w-full",autocomplete:"Plan Close Time",style:{width:"125px"}},null,8,["modelValue"])]),o("td",ue,[c(p,{id:"checkin_open_date_time",modelValue:a(n).checkin_open_date_time,"onUpdate:modelValue":l[5]||(l[5]=e=>a(n).checkin_open_date_time=e),name:"checkin_open_date_time",type:"datetime-local",class:"block w-full",autocomplete:"Actual Open Time",style:{width:"125px"}},null,8,["modelValue"])]),o("td",me,[c(p,{id:"checkin_close_date_time",modelValue:a(n).checkin_close_date_time,"onUpdate:modelValue":l[6]||(l[6]=e=>a(n).checkin_close_date_time=e),name:"checkin_close_date_time",type:"datetime-local",class:"block w-full",autocomplete:"Actual Close Time",style:{width:"125px"}},null,8,["modelValue"])]),o("td",_e,[c(p,{id:"class_code",modelValue:a(n).class_code,"onUpdate:modelValue":l[7]||(l[7]=e=>a(n).class_code=e),name:"class_code",type:"text",class:"block w-full",autocomplete:"Class Code",style:{width:"100px"}},null,8,["modelValue"])])])])])])):(d(),r("div",he,[o("table",fe,[o("thead",ye,[o("tr",null,[ge,xe,be,ke,o("th",we," Class Code"+u(t.$page.props.formMode==="edit"?": Label":""),1)])]),o("tbody",null,[(d(!0),r(k,null,w(v.planners,e=>(d(),r("tr",{id:e.id,key:e.id},[o("td",{id:"checkindesk-"+e.id,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},u(e.checkindesk),9,Ce),o("td",{id:"flight_identity-"+e.id,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},u(e.flight_identity),9,Ve),o("td",Ee,[c(p,{id:"converted_open-"+e.id,modelValue:e.converted_open.value,"onUpdate:modelValue":s=>e.converted_open.value=s,name:"converted_open",type:"datetime-local",step:"1",class:"block w-full planners-edit-open-date-input",autocomplete:"Plan Open Time",onChange:L},null,8,["id","modelValue","onUpdate:modelValue"])]),o("td",Ue,[c(p,{id:"converted_close-"+e.id,modelValue:e.converted_close.value,"onUpdate:modelValue":s=>e.converted_close.value=s,name:"converted_close",type:"datetime-local",step:"1",class:"block w-full planners-edit-close-date-input",autocomplete:"Plan Close Time",onChange:T},null,8,["id","modelValue","onUpdate:modelValue"])]),o("td",Me,[b(o("select",{id:"class_code-"+e.id,"onUpdate:modelValue":s=>e.class_code=s,name:"class_code",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm planners-edit-class-code-input",onChange:A},[(d(!0),r(k,null,w(t.$page.props.airlineLabels[e.id],(s,i)=>(d(),r("option",{key:s.id,value:i},u(i)+": "+u(s),9,Pe))),128))],40,Oe),[[$,e.class_code]])])],8,ve))),128))])])]))]),actions:f(()=>[o("a",Be,[c(Q,{type:"button"},{default:f(()=>[j(" Cancel ")]),_:1})]),Ie,c(K,null,{default:f(()=>[j(" Save ")]),_:1})]),_:1}))}};export{Te as default};
