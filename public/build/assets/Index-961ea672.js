import{J as Z,r as f,i as ee,q as V,v as te,k as se,O as S,d as o,b as n,w as d,F as H,o as a,a as e,u as _,s as le,l as y,m as C,f as p,g as T,t as b,n as oe,e as ae,x as ne}from"./app-262a2786.js";import{_ as ce,a as ie}from"./AppLayout-ebba8cdf.js";import{_ as I,a as de,b as re}from"./ItemsPerPage-63e35bdc.js";import{_ as U}from"./TextInput-bbe8df5b.js";import{_ as g}from"./SecondaryButton-d3277a63.js";import{_ as ue}from"./DangerButton-8bd23b7f.js";import{_ as R}from"./DialogModal-370dc470.js";import{_ as he}from"./InputError-5f2d5f55.js";import{_ as pe}from"./InputLabel-0afd5ac9.js";import{C as me}from"./Checkbox-4bd22b28.js";import{D as fe}from"./debounce-455de282.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal-e32cf43d.js";const _e=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," AirPortal JFK Terminal 4 | Schedules ",-1),ye={class:"py-4"},xe={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},be={class:"flex justify-between ml-2"},ge={class:"messages-search-text-div"},ve=e("div",{class:"self-align-center ml-2 mb-2"},[e("small",null,"Search By:")],-1),we={class:"mt-8 mr-2 messages-bulk-buttons"},ke={id:"alertnotification",class:"flex justify-end items-center scala-alert text-white text-sm font-bold px-4 py-3",role:"alert"},Ce=e("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z"})],-1),Se=["innerHTML"],Ee={class:"px-4 py-3 justify-end"},Be=e("title",null,"Close",-1),Me=e("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"},null,-1),$e=[Be,Me],Ne={key:0,id:"schedulesTable",class:"bg-white overflow-hidden shadow-xl sm:rounded-lg schedules-table"},Ae={class:"min-w-full divide-y divide-gray-200 border-separate"},ze={class:"bg-gray-200 border"},Ve=e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Preview ",-1),He={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Le={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Oe={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border",style:{width:"95px"}},Fe={key:0},De=e("td",null," No data to display ",-1),je=[De],Te=["onClick"],Ie=["src"],Ue={key:1,class:"svg-icon schedule-preview-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Re=e("path",{d:`M545 793.6H243.8c-11 0-20-9-20-20V250.4c0-11 9-20 20-20h432.4c11 0 20 9 20
                                            20v131.8c0 11 9 20 20 20s20-9 20-20V250.4c0-33.1-26.9-60-60-60H243.8c-33.1 0-60
                                            26.9-60 60v523.2c0 33.1 26.9 60 60 60H545c11 0 20-9 20-20s-8.9-20-20-20z`},null,-1),Pe=e("path",{d:`M834.6 789.8l-88.8-91.7c23.4-28.7 37.5-65.4 37.5-105.3 0-92.1-74.9-167-167-167s-167
                                            74.9-167 167 74.9 167 167 167c37.8 0 72.7-12.6 100.7-33.9l89 91.8c3.9 4 9.1 6 14.3 6 5
                                            0 10.1-1.9 14-5.7 7.8-7.6 8-20.3 0.3-28.2z m-218.4-69.9c-70 0-127-57-127-127s57-127
                                            127-127 127 57 127 127-57 127-127 127zM565 382.2c0-11-9-20-20-20H308.7c-11 0-20 9-20 20s9
                                            20 20 20H545c11.1 0 20-9 20-20zM443.5 493.5c0-11-9-20-20-20H308.7c-11 0-20 9-20 20s9 20 20
                                            20h114.8c11.1 0 20-8.9 20-20zM308.7 584.8c-11 0-20 9-20 20s9 20 20 20h61.7c11 0 20-9
                                            20-20s-9-20-20-20h-61.7z`},null,-1),qe=[Re,Pe],Je={key:1,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},Ke=["src"],Ye={key:1,class:"svg-icon schedule-preview-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},We=e("path",{d:`M545 793.6H243.8c-11 0-20-9-20-20V250.4c0-11 9-20 20-20h432.4c11 0 20 9 20
                                            20v131.8c0 11 9 20 20 20s20-9 20-20V250.4c0-33.1-26.9-60-60-60H243.8c-33.1 0-60
                                            26.9-60 60v523.2c0 33.1 26.9 60 60 60H545c11 0 20-9 20-20s-8.9-20-20-20z`},null,-1),Ge=e("path",{d:`M834.6 789.8l-88.8-91.7c23.4-28.7 37.5-65.4 37.5-105.3 0-92.1-74.9-167-167-167s-167
                                            74.9-167 167 74.9 167 167 167c37.8 0 72.7-12.6 100.7-33.9l89 91.8c3.9 4 9.1 6 14.3 6 5
                                            0 10.1-1.9 14-5.7 7.8-7.6 8-20.3 0.3-28.2z m-218.4-69.9c-70 0-127-57-127-127s57-127
                                            127-127 127 57 127 127-57 127-127 127zM565 382.2c0-11-9-20-20-20H308.7c-11 0-20 9-20 20s9
                                            20 20 20H545c11.1 0 20-9 20-20zM443.5 493.5c0-11-9-20-20-20H308.7c-11 0-20 9-20 20s9 20 20
                                            20h114.8c11.1 0 20-8.9 20-20zM308.7 584.8c-11 0-20 9-20 20s9 20 20 20h61.7c11 0 20-9
                                            20-20s-9-20-20-20h-61.7z`},null,-1),Qe=[We,Ge],Xe=["onClick"],Ze={key:3,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},et=["onClick"],tt={key:5,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},st=["onClick"],lt={class:"px-6 py-4 ml-3 border-none"},ot={class:"grid-cols-2"},at={class:"schedule-pagination"},nt={class:"mt-4 ml-4 mb-4"},ct={class:"mt-4 ml-4 mb-4"},it=e("div",{class:"schedule-upload-btn-box"},null,-1),dt={key:1},rt=e("p",null,"You do not have permission to access this page.",-1),ut={class:"scala-modal-notes"},ht=e("br",null,null,-1),pt=e("span",{class:"scala-modal-warning"},"Any messages linked to deleted schedule(s) will be deleted as well.",-1),mt=e("br",null,null,-1),ft=e("span",{class:"scala-modal-warning"},"Note: Schedules that have linked messages are highlighted red.",-1),_t={class:"min-w-full divide-y divide-gray-200 border-separate"},yt=e("thead",{class:"bg-gray-200 border"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Preview "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Name "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Category ")])],-1),xt={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},bt=["src"],gt={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},vt={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},wt=e("span",{style:{width:"20px"}},null,-1),kt=e("span",null,"Create Schedule:",-1),Ct={class:"grid-cols-2"},St={class:"px-2"},Et=e("span",{style:{width:"20px"}},null,-1),Tt={__name:"Index",props:{schedules:{type:Object,default:()=>({})},canReadSchedules:{type:Boolean,default:()=>!1},canEditSchedules:{type:Boolean,default:()=>!1},canDeleteSchedules:{type:Boolean,default:()=>!1},canAddSchedules:{type:Boolean,default:()=>!1},isSuperAdmin:{type:Boolean,default:()=>!1},filters:{type:Object,default:()=>({})}},setup(i){const E=i,L=Z(),B=f(!1);let M=f("");const $=ee({get(){return M.value?M.value:L.props.flash.message},set(l){M.value=l}}),O=()=>{B.value=!0,document.getElementById("alertnotification")&&(document.getElementById("alertnotification").style="display:justify;")},P=()=>{B.value=!1,document.getElementById("alertnotification")&&(document.getElementById("alertnotification").style="display:none;")};V(L.props,function(l){l!=null&&l.flashMessage&&O()},{immediate:!0,deep:!0}),V($,(l,t)=>{l&&O()},{immediate:!0,deep:!0});const u=te("scheduleForm",{name:"",category:"",description:"",full_url:null,thumbnail:null,store_by_url:!1}),q=()=>{h.active=!1,h.allCheck=!1,r=[],w=[],v.value=!1,D(!1)},h=se({active:!1,allCheck:!0});let r=[];const J=l=>{let t=l.target.parentNode.parentNode.parentNode.parentNode;if(l.target.checked==!0)r.push(parseInt(l.target.value)),t.classList.add("scala-tr-selected");else{let c=r.indexOf(parseInt(l.target.value));r.splice(c,1),t.classList.remove("scala-tr-selected")}r.length>0?h.active=!0:(h.active=!1,h.allCheck=!0,r=[])},F=l=>{document.getElementById(l).click()},D=(l=!0)=>{let t=document.querySelectorAll('input[type="checkbox"]');for(let c=0;c<t.length;c++){let s=t[c].parentNode.parentNode.parentNode.parentNode;if(h.allCheck&&l)t[c].checked=!0,r.push(parseInt(t[c].value)),s.classList.add("scala-tr-selected");else{t[c].checked=!1;let m=r.indexOf(parseInt(t[c].value));r.splice(m,1),s.classList.remove("scala-tr-selected")}}h.allCheck&&l?(document.getElementById("selectAllButton").innerText="Unselect All",h.active=!0,h.allCheck=!1):(document.getElementById("selectAllButton").innerText="Select All",r=[],h.active=!1,h.allCheck=!0)},v=f(!1),N=f(!1);f(null),f(null);const j=f(null);let w=[];const K=()=>{E.schedules.data.forEach(l=>{let t=w.indexOf(l);r.includes(l.id)?t===-1&&w.push(l):t>-1&&w.splice(t,1)}),v.value=!0},Y=()=>{r.length>0&&S.delete(route("schedules.destroy",JSON.stringify(r)),{onSuccess:()=>x(),onFinish:()=>x()})},W=()=>{N.value=!0},A=l=>{S.get(route("schedules.edit",l))},G=()=>{u.clearErrors(),u.full_url==""&&(u.setError("full_url","Full URL required."),document.getElementById("full_url").classList.add("form-error-input")),!(Object.keys(u.errors).length>0)&&(u.store_by_url=!0,u.post(route("schedules.store"),{preserveScroll:!0,onError:()=>u.focus(),onSuccess:()=>x(),onFinish:()=>u.reset()}))};j.value&&(u.full_url=j.value.files[0]);const x=(l=!1)=>{v.value=!1,N.value=!1,l&&q()},Q=l=>{let t="";return typeof l=="object"?(t+="Problem updating schedule! (records with issues marked in red)<br/>",Object.entries(l).forEach(c=>{const[s,m]=c;t+=m}),t):l},z=l=>{let t=l;return t.indexOf("_")>-1?(t=t.split("_"),t=t[0].charAt(0).toUpperCase()+t[0].slice(1)+" "+t[1].charAt(0).toUpperCase()+t[1].slice(1)):t=t.charAt(0).toUpperCase()+t.slice(1),t};let k=f(E.filters.search);const X=fe(l=>{S.get("/schedules",{search:l},{replace:!0})},300);return V(k,X),S.on("success",()=>{v.value=!1}),(l,t)=>{const c=ne("tippy");return a(),o(H,null,[n(ce,{title:"AirPortal JFK Terminal 4"},{header:d(()=>[_e]),default:d(()=>[e("div",ye,[e("div",xe,[e("div",be,[e("div",ge,[ve,n(U,{id:"search",modelValue:_(k),"onUpdate:modelValue":t[0]||(t[0]=s=>le(k)?k.value=s:k=s),type:"text",placeholder:"Schedule Name, Message Name",class:"mb-6",style:{width:"400px",opacity:".75"}},null,8,["modelValue"])]),e("div",we,[y(e("span",null,[n(g,{id:"selectAllButton",class:"scala-edit-btn slim-header-btn",disabled:Object.keys(E.schedules).length===0,onClick:t[1]||(t[1]=s=>D())},{default:d(()=>[p(" Select All ")]),_:1},8,["disabled"]),n(g,{class:"scala-delete-btn slim-header-btn",disabled:h.active===!1,onClick:t[2]||(t[2]=s=>K())},{default:d(()=>[p(" Delete ✓ ")]),_:1},8,["disabled"]),y(n(g,{class:"scala-edit-btn slim-header-btn",onClick:t[3]||(t[3]=s=>W())},{default:d(()=>[p(" Create ")]),_:1},512),[[C,i.canAddSchedules]])],512),[[C,i.canEditSchedules]])])]),y(e("div",ke,[Ce,e("p",{innerHTML:_($)?Q(_($)):""},null,8,Se),e("span",Ee,[(a(),o("svg",{class:"fill-current h-6 w-6 text-indigo-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",onClick:t[4]||(t[4]=s=>P())},$e))])],512),[[C,B.value]]),i.canReadSchedules?(a(),o("div",Ne,[e("table",Ae,[e("thead",ze,[e("tr",null,[Ve,e("th",He,[n(I,{label:"Name",attribute:"name"})]),e("th",Le,[n(I,{label:"Categories",attribute:"category"})]),y(e("th",Oe," SELECT ",512),[[C,i.canDeleteSchedules||i.canEditSchedules]])])]),e("tbody",null,[!i.schedules.data||!i.schedules.data.length?(a(),o("tr",Fe,je)):(a(!0),o(H,{key:1},T(i.schedules.data,s=>(a(),o("tr",{key:s.id,class:"cursor-pointer scala-tr"},[i.canEditSchedules?y((a(),o("td",{key:0,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:m=>A(s.id)},[s.thumbnail_photo_url?(a(),o("img",{key:0,class:"schedule-thumbnail-image",src:s.thumbnail_photo_url,alt:"schedule-thumbnail"},null,8,Ie)):(a(),o("svg",Ue,qe))],8,Te)),[[c,{content:"Click to Edit: <b>"+s.name+"</b>"}]]):(a(),o("td",Je,[s.thumbnail_photo_url?(a(),o("img",{key:0,class:"schedule-thumbnail-image",src:s.thumbnail_photo_url,alt:"schedule-thumbnail"},null,8,Ke)):(a(),o("svg",Ye,Qe))])),i.canEditSchedules?y((a(),o("td",{key:2,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:m=>A(s.id)},[p(b(s.name),1)],8,Xe)),[[c,{content:"Click to Edit: <b>"+s.name+"</b>"}]]):(a(),o("td",Ze,b(s.name),1)),i.canEditSchedules?y((a(),o("td",{key:4,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:m=>A(s.id)},[p(b(z(s.category)),1)],8,et)),[[c,{content:"Click to Edit: <b>"+s.name+"</b>"}]]):(a(),o("td",tt,b(z(s.category)),1)),y((a(),o("td",{class:"border cursor-pointer",onClick:m=>F("checkbox"+s.id)},[e("div",lt,[n(me,{id:"checkbox"+s.id,value:s.id.toString(),onClick:m=>F("checkbox"+s.id),onChange:t[5]||(t[5]=m=>J(m))},null,8,["id","value","onClick"])])],8,st)),[[C,i.canDeleteSchedules||i.canEditSchedules],[c,{content:"Click to select schedule"}]])]))),128))])]),e("div",ot,[e("div",at,[e("div",nt,[n(de)]),e("div",ct,[n(re,{links:i.schedules.links},null,8,["links"])])]),it])])):(a(),o("div",dt,[rt,n(ie,{href:l.route("planners.index",{_query:{today_only:0,search_by:"open",active_only:1,sort:"checkindesk"}}),active:l.route().current("planners.index")},{default:d(()=>[p(" Return to Main Page ")]),_:1},8,["href","active"])]))])])]),_:1}),n(R,{show:v.value,onClose:t[7]||(t[7]=s=>x())},{content:d(()=>[e("div",ut,[p(" Are you sure you want to delete "+b(_(r).length>1?"these schedules?":"this schedule?"),1),ht,pt,mt,ft]),e("table",_t,[yt,e("tbody",null,[(a(!0),o(H,null,T(_(w),s=>(a(),o("tr",{key:s.id,class:oe(s.messages.length>0?"scala-tr-warn":"")},[e("td",xt,[s.thumbnail_photo_url?(a(),o("img",{key:0,class:"schedule-thumbnail-image",src:s.thumbnail_photo_url,alt:"schedule-thumbnail"},null,8,bt)):ae("",!0)]),e("td",gt,b(s.name),1),e("td",vt,b(z(s.category)),1)],2))),128))])])]),footer:d(()=>[n(g,{class:"scala-delete-btn",onClick:t[6]||(t[6]=s=>x())},{default:d(()=>[p(" NO ")]),_:1}),wt,n(ue,{onClick:Y},{default:d(()=>[p(" YES ")]),_:1})]),_:1},8,["show"]),n(R,{show:N.value,"max-width":"md",onClose:t[10]||(t[10]=s=>x())},{title:d(()=>[kt]),content:d(()=>[e("div",Ct,[e("div",St,[n(pe,{for:"full_url",value:"Full URL"}),n(U,{id:"full_url",modelValue:_(u).full_url,"onUpdate:modelValue":t[8]||(t[8]=s=>_(u).full_url=s),name:"full_url",type:"text",class:"block w-full"},null,8,["modelValue"]),n(he,{message:_(u).errors.full_url},null,8,["message"])])])]),footer:d(()=>[n(g,{class:"scala-delete-btn",onClick:t[9]||(t[9]=s=>x())},{default:d(()=>[p(" Cancel ")]),_:1}),Et,n(g,{class:"scala-primary-btn",onClick:G},{default:d(()=>[p(" Create ")]),_:1})]),_:1},8,["show"])],64)}}};export{Tt as default};
