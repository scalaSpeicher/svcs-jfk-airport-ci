import{J,r as g,i as H,q as I,k as K,O as A,d as n,b as l,w as m,F as S,o as c,a as t,u as y,s as U,e as Y,l as a,m as v,f as d,g as j,n as W,t as p,A as G,x as Q}from"./app-262a2786.js";import{_ as X,a as Z}from"./AppLayout-ebba8cdf.js";import{_ as f,a as D,b as ee}from"./ItemsPerPage-63e35bdc.js";import{_ as te}from"./TextInput-bbe8df5b.js";import{_ as M}from"./SecondaryButton-d3277a63.js";import{_ as se}from"./DangerButton-8bd23b7f.js";import{C as oe}from"./Checkbox-4bd22b28.js";import{D as le}from"./debounce-455de282.js";import{_ as ne}from"./DialogModal-370dc470.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal-e32cf43d.js";const ce=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," AirPortal JFK Terminal 4 | Overrides ",-1),ie={class:"py-4"},re={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},ae={class:"flex justify-between ml-2"},de={key:0},pe=t("div",{class:"self-align-center ml-2 mb-2"},[t("small",null,"Search By:")],-1),ue={class:"mt-8 mr-2 overrides-bulk-buttons"},he={id:"alertnotification",class:"flex justify-end items-center scala-alert text-white text-sm font-bold px-4 py-3",role:"alert"},_e=t("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z"})],-1),me=["innerHTML"],xe={class:"px-4 py-3 justify-end"},fe=t("title",null,"Close",-1),ye=t("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"},null,-1),be=[fe,ye],ke={key:0,id:"overridesTable",class:"bg-white overflow-hidden shadow-xl sm:rounded-lg overrides-table"},ge={class:"min-w-full divide-y divide-gray-200 border-separate"},ve={class:"bg-gray-200 border"},Ce={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},we={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Oe={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},$e={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Be={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Ee={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Ie={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Ae={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Se={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Me={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Re={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border",style:{width:"95px"}},Ve={key:0},je=t("td",null," No data to display ",-1),Te=[je],Fe=["onClick"],Pe=["onClick"],Le=["onClick"],Ne=["onClick"],qe=["onClick"],ze=["onClick"],Je=["onClick"],He=["onClick"],Ke=["onClick"],Ue=["onClick"],Ye=["onClick"],We={class:"px-6 py-4 ml-3 border-none"},Ge={style:{display:"flex"}},Qe={class:"mt-4 ml-4 mb-4"},Xe={class:"mt-4 ml-4 mb-4"},Ze={key:1},De=t("p",null,"You do not have permission to access this page.",-1),et=t("span",null,"REMOVE OVERRIDE(S)",-1),tt={class:"min-w-full divide-y divide-gray-200 border-separate"},st={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},ot={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},lt={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},nt={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},ct=t("span",{style:{width:"20px"}},null,-1),yt={__name:"Index",props:{overrides:{type:Object,default:()=>({})},canReadOverrides:{type:Boolean,default:()=>!1},canRestoreOverrides:{type:Boolean,default:()=>!1},isSuperAdmin:{type:Boolean,default:()=>!1},filters:{type:Object,default:()=>({})}},setup(x){const C=x,R=J(),w=g(!1);let O=g("");const $=H({get(){return O.value?O.value:R.props.flash.message},set(s){O.value=s}}),V=()=>{w.value=!0,document.getElementById("alertnotification")&&(document.getElementById("alertnotification").style="display:justify;")},T=()=>{w.value=!1,document.getElementById("alertnotification")&&(document.getElementById("alertnotification").style="display:none;")};I(R.props,function(s){s!=null&&s.flashMessage&&V()},{immediate:!0,deep:!0}),I($,(s,o)=>{s&&V()},{immediate:!0,deep:!0});const h=K({active:!1,allCheck:!0});let u=[];const F=s=>{if(s.target.checked==!0)u.push(parseInt(s.target.value));else{let o=u.indexOf(parseInt(s.target.value));u.splice(o,1)}u.length>0?h.active=!0:(h.active=!1,h.allCheck=!0,u=[])},_=s=>{document.getElementById(s).click()},P=()=>{let s=document.querySelectorAll('input[type="checkbox"]');for(let o=0;o<s.length;o++)if(h.allCheck)s[o].checked=!0,u.push(parseInt(s[o].value));else{s[o].checked=!1;let i=u.indexOf(parseInt(s[o].value));u.splice(i,1)}h.allCheck?(document.getElementById("selectAllButton").innerText="Unselect All",h.active=!0,h.allCheck=!1):(document.getElementById("selectAllButton").innerText="Select All",u=[],h.active=!1,h.allCheck=!0)},B=g(!1);let b=[];const L=()=>{C.overrides.data.forEach(s=>{let o=b.indexOf(s);u.includes(s.id)?o===-1&&b.push(s):o>-1&&b.splice(o,1)}),B.value=!0},N=()=>{u.length>0&&A.put(route("overrides.restore",JSON.stringify(u)),{onSuccess:()=>E()})},E=()=>{B.value=!1},q=le(s=>{A.get("/overrides",{search:s},{replace:!0})},300),z=s=>{let o="";return typeof s=="object"?(o+="Problem updating template! (records with issues marked in red)<br/>",Object.entries(s).forEach(i=>{const[e,r]=i;o+=r}),o):s};let k=g(C.filters.search);return I(k,q),A.on("success",()=>{h.active=!1,h.allCheck=!1,u=[],b=[]}),(s,o)=>{const i=Q("tippy");return c(),n(S,null,[l(X,{title:"AirPortal JFK Terminal 4"},{header:m(()=>[ce]),default:m(()=>[t("div",ie,[t("div",re,[t("div",ae,[x.canReadOverrides?(c(),n("div",de,[pe,l(te,{id:"search",modelValue:y(k),"onUpdate:modelValue":o[0]||(o[0]=e=>U(k)?k.value=e:k=e),type:"text",placeholder:"Check In Desk, Flight Identity, Class Code",class:"mb-6",style:{width:"400px",opacity:".75"}},null,8,["modelValue"])])):Y("",!0),t("div",ue,[a(t("span",null,[l(M,{id:"selectAllButton",class:"slim-header-btn",disabled:Object.keys(C.overrides.data).length===0,onClick:o[1]||(o[1]=e=>P())},{default:m(()=>[d(" Select All ")]),_:1},8,["disabled"]),l(M,{class:"slim-header-btn",disabled:h.active===!1,onClick:o[2]||(o[2]=e=>L())},{default:m(()=>[d(" Remove ✓ ")]),_:1},8,["disabled"])],512),[[v,x.canRestoreOverrides]])])]),a(t("div",he,[_e,t("p",{innerHTML:y($)?z(y($)):""},null,8,me),t("span",xe,[(c(),n("svg",{class:"fill-current h-6 w-6 text-indigo-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",onClick:o[3]||(o[3]=e=>T())},be))])],512),[[v,w.value]]),x.canReadOverrides?(c(),n("div",ke,[t("table",ge,[t("thead",ve,[t("tr",null,[t("th",Ce,[l(f,{label:"Check-In Desk",attribute:"checkindesk"})]),t("th",we,[l(f,{label:"Flight Identity",attribute:"flight_identity"})]),t("th",Oe,[l(f,{label:"Plan Open Date",attribute:"checkin_plan_open_date_time"})]),t("th",$e,[l(f,{label:"Plan Close Date",attribute:"checkin_plan_close_date_time"})]),t("th",Be,[l(f,{label:"Actual Open Date",attribute:"checkin_open_date_time"})]),t("th",Ee,[l(f,{label:"Actual Close Date",attribute:"checkin_close_date_time"})]),t("th",Ie,[l(f,{label:"Class Code",attribute:"class_code"})]),t("th",Ae,[l(f,{label:"Label",attribute:"label"})]),t("th",Se,[l(f,{label:"Overridden By",attribute:"overridden_by_name"})]),t("th",Me,[l(f,{label:"Created At",attribute:"updated_at"})]),a(t("th",Re," SELECT ",512),[[v,x.canRestoreOverrides]])])]),t("tbody",null,[!x.overrides.data||!x.overrides.data.length?(c(),n("tr",Ve,Te)):(c(!0),n(S,{key:1},j(x.overrides.data,e=>a((c(),n("tr",{key:e.id,class:W(e.deletion?"cursor-pointer override-deletion-row-color":"cursor-pointer override-row-color")},[a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("checkbox"+e.id)},[d(p(e.checkindesk),1)],8,Fe)),[[i,{content:"Click to select override"}]]),a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("checkbox"+e.id)},[d(p(e.flight_identity),1)],8,Pe)),[[i,{content:"Click to select override"}]]),a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("checkbox"+e.id)},[d(p(e.checkin_plan_open_date_time),1)],8,Le)),[[i,{content:"Click to select override"}]]),a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("checkbox"+e.id)},[d(p(e.checkin_plan_close_date_time),1)],8,Ne)),[[i,{content:"Click to select override"}]]),a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("checkbox"+e.id)},[d(p(e.checkin_open_date_time),1)],8,qe)),[[i,{content:"Click to select override"}]]),a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("checkbox"+e.id)},[d(p(e.checkin_close_date_time),1)],8,ze)),[[i,{content:"Click to select override"}]]),a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("checkbox"+e.id)},[d(p(e.class_code),1)],8,Je)),[[i,{content:"Click to select override"}]]),a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("checkbox"+e.id)},[d(p(e.label),1)],8,He)),[[i,{content:"Click to select override"}]]),a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("user"+e.id)},[l(y(G),{id:"user"+e.id,style:{cursor:"pointer"},href:s.route("users.index",{_query:{search:e.actor_email}})},{default:m(()=>[d(p(e.overridden_by_name),1)]),_:2},1032,["id","href"])],8,Ke)),[[i,"Click to View: <b>"+e.overridden_by_name+"</b>"]]),a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("checkbox"+e.id)},[d(p(e.updated_at),1)],8,Ue)),[[i,{content:"Click to select override"}]]),a((c(),n("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:r=>_("checkbox"+e.id)},[t("div",We,[l(oe,{id:"checkbox"+e.id,value:e.id.toString(),onClick:r=>_("checkbox"+e.id),onChange:o[4]||(o[4]=r=>F(r))},null,8,["id","value","onClick"])])],8,Ye)),[[v,x.canRestoreOverrides],[i,{content:"Click to select override"}]])],2)),[[i,e.deletion?{content:"Deleted Planner"}:{content:"Overriden Planner"}]])),128))])]),t("div",Ge,[t("div",Qe,[l(D)]),t("div",Xe,[l(ee,{links:x.overrides.links},null,8,["links"])])])])):(c(),n("div",Ze,[De,l(Z,{href:s.route("planners.index",{_query:{today_only:0,search_by:"open",active_only:1,sort:"checkindesk"}}),active:s.route().current("planners.index")},{default:m(()=>[d(" Return to Main Page ")]),_:1},8,["href","active"])]))])])]),_:1}),l(ne,{show:B.value,onClose:o[6]||(o[6]=e=>E())},{title:m(()=>[et]),content:m(()=>[t("span",null,"Are you sure you want to remove "+p(y(u).length>1?"these overrides?":"this override?"),1),t("table",tt,[t("tbody",null,[(c(!0),n(S,null,j(y(b),e=>(c(),n("tr",{key:e.id},[t("td",st,p(e.checkindesk),1),t("td",ot,p(e.flight_identity),1),t("td",lt,p(e.checkin_plan_open_date_time),1),t("td",nt,p(e.checkin_plan_close_date_time),1)]))),128))])])]),footer:m(()=>[l(M,{onClick:o[5]||(o[5]=e=>E())},{default:m(()=>[d(" NO ")]),_:1}),ct,l(se,{onClick:N},{default:m(()=>[d(" YES ")]),_:1})]),_:1},8,["show"])],64)}}};export{yt as default};
