import{v as x,r as C,d as r,b as n,w as t,e as u,o as l,f as i,a,l as T,y as K,u as o,F as h,g as b,t as p,n as v,c as Q,A as W,m as O,O as X,J as Y,x as Z}from"./app-262a2786.js";import{_ as ee}from"./ActionMessage-10225983.js";import{_ as B}from"./ActionSection-72bf6f02.js";import{_ as j}from"./ConfirmationModal-555a1821.js";import{_ as A}from"./DangerButton-8bd23b7f.js";import{_ as te}from"./DialogModal-370dc470.js";import{_ as se}from"./FormSection-8e6c7726.js";import{_ as oe}from"./InputError-5f2d5f55.js";import{_ as D}from"./InputLabel-0afd5ac9.js";import{_ as L}from"./PrimaryButton-a709ea04.js";import{_ as M}from"./SecondaryButton-d3277a63.js";import{S as E}from"./SectionBorder-35e93445.js";import"./SectionTitle-9e468a0a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal-e32cf43d.js";const ae={key:0},le=a("div",{class:"col-span-6"},[a("div",{class:"max-w-xl text-sm text-gray-600"}," Please provide the email address of the person you would like to add to this team. ")],-1),re={class:"col-span-6 sm:col-span-4 mt-4"},ne=["name","value"],ie={key:0,class:"col-span-6 lg:col-span-4"},me={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},de=["onClick"],ce={class:"flex items-center"},ue={key:0,class:"ml-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},pe=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),ve=[pe],fe={class:"mt-2 text-xs text-gray-600 text-left"},_e={key:1},ge={class:"space-y-6"},ye={class:"text-gray-600"},he={class:"flex items-center"},be=["onClick"],ke={key:2},we={class:"space-y-6"},$e={class:"flex items-center"},xe=["src","alt"],Ce={class:"ml-4"},Te={class:"flex items-center"},Se=["onClick"],Re=["onClick"],Me={key:0},Ee={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},Oe=["onClick"],Be={class:"flex items-center"},je={key:0,class:"ml-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ae=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),De=[Ae],Le={class:"mt-2 text-xs text-gray-600"},Ye={__name:"TeamMemberManager",props:{team:{type:Object,default:()=>({})},usersOptions:{type:Array,default:()=>[]},selectedEmail:{type:String,default:()=>""},permissions:{type:Object,default:()=>({})}},setup(k){const g=k,c=x({email:g.selectedEmail,role:null}),m=x({role:null}),S=x({}),R=x({}),y=C(!1),w=C(null),$=C(!1),_=C(null),z=()=>{c.post(route("team-members.store",[g.team,w.value]),{errorBag:"addTeamMember",preserveScroll:!0,preserveState:!1,resetOnSuccess:!0,onSuccess:()=>c.reset()})},F=s=>{X.delete(route("team-invitations.destroy",s),{preserveScroll:!0,preserveState:!1,resetOnSuccess:!0})},V=s=>{w.value=s,m.role=s.role,m.name=s.name,m.email=s.email,y.value=!0},N=()=>{m.put(route("team-members.update",[g.team.id,w.value.user_id,m.role]),{preserveScroll:!0,preserveState:!1,resetOnSuccess:!0,onSuccess:()=>y.value=!1})},q=()=>{$.value=!0},I=s=>{m.role=s.key},P=()=>{S.delete(route("team-members.destroy",[g.team,Y().props.auth.user]))},J=s=>{_.value=s},U=()=>{R.delete(route("team-members.destroy",[g.team,_.value.user_id]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!1,resetOnSuccess:!0,onSuccess:()=>_.value=null})};return(s,d)=>{const G=Z("tippy");return l(),r("div",null,[s.$page.props.userData.canEditTeams?(l(),r("div",ae,[n(E),n(se,{onSubmitted:z},{title:t(()=>[i(" Add Team Member ")]),description:t(()=>[i(" Add a new team member to your team, allowing them to collaborate with you. ")]),form:t(()=>[le,a("div",re,[n(D,{for:"email",value:"Email",style:{"min-width":"300px"}}),T(a("select",{id:"email","onUpdate:modelValue":d[0]||(d[0]=e=>o(c).email=e),autocomplete:"Email",style:{"min-width":"300px",cursor:"pointer"},required:"",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-1 block w-full"},[(l(!0),r(h,null,b(s.$page.props.usersOptions,e=>(l(),r("option",{key:e.id,name:e.email,value:e.email},p(e.email+" ("+e.first_name+" "+e.last_name+")"),9,ne))),128))],512),[[K,o(c).email]])]),s.$page.props.availableRoles.length>0?(l(),r("div",ie,[n(D,{for:"roles",value:"Role"}),n(oe,{message:o(c).errors.role,class:"mt-2"},null,8,["message"]),a("div",me,[(l(!0),r(h,null,b(s.$page.props.availableRoles,(e,f)=>(l(),r("button",{key:e.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-gray-200 focus:border-none rounded-t-none":f>0,"rounded-b-none":f!=Object.keys(s.$page.props.availableRoles).length-1}]),onClick:H=>o(c).role=e.key},[a("div",{class:v({"opacity-50":o(c).role&&o(c).role!=e.key})},[a("div",ce,[a("div",{class:v(["text-sm text-gray-600",{"font-semibold":o(c).role==e.key}])},p(e.name),3),o(c).role==e.key?(l(),r("svg",ue,ve)):u("",!0)]),a("div",fe,p(e.description),1)],2)],10,de))),128))])])):u("",!0)]),actions:t(()=>[n(ee,{on:o(c).recentlySuccessful,class:"mr-3"},{default:t(()=>[i(" Added. ")]),_:1},8,["on"]),n(L,{class:v({"opacity-25":o(c).processing}),disabled:o(c).processing},{default:t(()=>[i(" Add ")]),_:1},8,["class","disabled"])]),_:1})])):u("",!0),k.team.team_invitations.length>0&&s.$page.props.userData.canEditTeams?(l(),r("div",_e,[n(E),n(B,{class:"mt-10 sm:mt-0"},{title:t(()=>[i(" Pending Team Invitations ")]),description:t(()=>[i(" These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation. ")]),content:t(()=>[a("div",ge,[(l(!0),r(h,null,b(k.team.team_invitations,e=>(l(),r("div",{key:e.id,class:"flex items-center justify-between"},[a("div",ye,p(e.email),1),a("div",he,[s.$page.props.userData.canEditTeams?(l(),r("button",{key:0,class:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",onClick:f=>F(e)}," Cancel ",8,be)):u("",!0)])]))),128))])]),_:1})])):u("",!0),k.team.memberships.length>0?(l(),r("div",ke,[n(E),n(B,{class:"mt-10 sm:mt-0"},{title:t(()=>[i(" Team Members ")]),description:t(()=>[i(" All of the people that are part of this team. ")]),content:t(()=>[a("div",we,[(l(!0),r(h,null,b(s.$page.props.team.memberships,e=>(l(),r("div",{key:e.id,class:"flex items-center justify-between"},[a("div",$e,[a("img",{class:"w-8 h-8 rounded-full",src:e.profile_photo_url,alt:e.email},null,8,xe),a("div",Ce,[T((l(),Q(o(W),{style:{cursor:"pointer"},href:s.route("users.index",{_query:{search:e.email}})},{default:t(()=>[i(p(e.name)+" ("+p(e.email)+") ",1)]),_:2},1032,["href"])),[[G,"Click to view user"]])])]),a("div",Te,[s.$page.props.availableRoles?T((l(),r("button",{key:0,class:"ml-2 text-sm text-gray-400 no-underline hover:text-gray-600 pointer",onClick:f=>V(e)}," Edit ",8,Se)),[[O,s.$page.props.userData.canEditTeams&&e.role!="owner"]]):u("",!0),s.$page.props.auth.user.id===e.user_id?(l(),r("button",{key:1,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:q}," Leave ")):s.$page.props.userData.canEditTeams?T((l(),r("button",{key:2,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:f=>J(e)}," Remove ",8,Re)),[[O,s.$page.props.userData.canEditTeams&&e.role!="owner"]]):u("",!0)])]))),128))])]),_:1})])):u("",!0),n(te,{show:y.value,onClose:d[2]||(d[2]=e=>y.value=!1)},{title:t(()=>[i(" Manage Role | "+p(o(m).name)+" ("+p(o(m).email)+") ",1)]),content:t(()=>[w.value?(l(),r("div",Me,[a("div",Ee,[(l(!0),r(h,null,b(s.$page.props.availableRoles,(e,f)=>(l(),r("button",{key:e.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-gray-200 focus:border-none rounded-t-none":f>0,"rounded-b-none":f!==Object.keys(s.$page.props.availableRoles).length-1}]),onClick:H=>I(e)},[a("div",{class:v({"opacity-50":o(m).role&&o(m).role!==e.key})},[a("div",Be,[a("div",{class:v(["text-sm text-gray-600",{"font-semibold":o(m).role===e.key}])},p(e.name),3),o(m).role==e.key?(l(),r("svg",je,De)):u("",!0)]),a("div",Le,p(e.description),1)],2)],10,Oe))),128))])])):u("",!0)]),footer:t(()=>[n(M,{onClick:d[1]||(d[1]=e=>y.value=!1)},{default:t(()=>[i(" Cancel ")]),_:1}),n(L,{class:v(["ml-3",{"opacity-25":o(m).processing}]),disabled:o(m).processing,onClick:N},{default:t(()=>[i(" Save ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),n(j,{show:$.value,onClose:d[4]||(d[4]=e=>$.value=!1)},{title:t(()=>[i(" Leave Team ")]),content:t(()=>[i(" Are you sure you would like to leave this team? ")]),footer:t(()=>[n(M,{onClick:d[3]||(d[3]=e=>$.value=!1)},{default:t(()=>[i(" Cancel ")]),_:1}),n(A,{class:v(["ml-3",{"opacity-25":o(S).processing}]),disabled:o(S).processing,onClick:P},{default:t(()=>[i(" Leave ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),n(j,{show:_.value!=null,onClose:d[6]||(d[6]=e=>_.value=null)},{title:t(()=>[i(" Remove Team Member ")]),content:t(()=>[i(" Are you sure you would like to remove this person from the team? ")]),footer:t(()=>[n(M,{onClick:d[5]||(d[5]=e=>_.value=null)},{default:t(()=>[i(" Cancel ")]),_:1}),n(A,{class:v(["ml-3",{"opacity-25":o(R).processing}]),disabled:o(R).processing,onClick:U},{default:t(()=>[i(" Remove ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])])}}};export{Ye as default};
