import{J as E,r as x,i as T,q as y,O as V,c as b,w as u,o,a as e,d as r,b as l,u as n,s as L,e as F,l as g,m as I,g as O,t as p,A as k,f as B,F as P,x as S}from"./app-262a2786.js";import{_ as $}from"./AppLayout-ebba8cdf.js";import{_ as m,a as H,b as N}from"./ItemsPerPage-63e35bdc.js";import{_ as q}from"./TextInput-bbe8df5b.js";import{D as z}from"./debounce-455de282.js";import"./_plugin-vue_export-helper-c27b6911.js";const J=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," AirPortal JFK Terminal 4 | Audits ",-1),R={class:"py-4"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},U={class:"flex justify-between ml-2"},W={key:0},G=e("div",{class:"self-align-center ml-2 mb-2"},[e("small",null,"Search By:")],-1),Q=e("div",{class:"mt-8 mr-2"},null,-1),X={id:"alertnotification",class:"flex justify-end items-center scala-alert text-white text-sm font-bold px-4 py-3",role:"alert"},Y=e("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z"})],-1),Z=["innerHTML"],ee={class:"px-4 py-3 justify-end"},te=e("title",null,"Close",-1),se=e("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"},null,-1),ae=[te,se],oe={id:"AuditsTable",class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},le={class:"min-w-full divide-y divide-gray-200 border-separate"},re={class:"bg-gray-200 border"},ie={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},ne={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},de={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},ce={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},ue={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},pe={key:0},me={key:1},he={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},_e=["innerHTML"],fe={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},xe={style:{display:"flex"}},ye={class:"mt-4 ml-4 mb-4"},be={class:"mt-4 ml-4 mb-4"},Ce={__name:"Index",props:{audits:{type:Object,default:()=>({})},canReadAudits:{type:Boolean,default:()=>!1},isSuperAdmin:{type:Boolean,default:()=>!1},filters:{type:Object,default:()=>({})}},setup(d){const M=d,w=E(),h=x(!1);let _=x("");const f=T({get(){return _.value?_.value:w.props.flash.message},set(t){_.value=t}}),v=()=>{h.value=!0,document.getElementById("alertnotification")&&(document.getElementById("alertnotification").style="display:justify;")},C=()=>{h.value=!1,document.getElementById("alertnotification")&&(document.getElementById("alertnotification").style="display:none;")};y(w.props,function(t){t!=null&&t.flashMessage&&v()},{immediate:!0,deep:!0}),y(f,(t,a)=>{t&&v()},{immediate:!0,deep:!0});const j=t=>{let a="";return typeof t=="object"?(a+="Problem updating template! (records with issues marked in red)<br/>",Object.entries(t).forEach(c=>{const[s,D]=c;a+=D}),a):t},A=z(t=>{V.get("/audits",{search:t},{replace:!0})},300);let i=x(M.filters.search);return y(i,A),(t,a)=>{const c=S("tippy");return o(),b($,{title:"AirPortal JFK Terminal 4"},{header:u(()=>[J]),default:u(()=>[e("div",R,[e("div",K,[e("div",U,[d.canReadAudits?(o(),r("div",W,[G,l(q,{id:"search",modelValue:n(i),"onUpdate:modelValue":a[0]||(a[0]=s=>L(i)?i.value=s:i=s),type:"text",placeholder:"Data, Person, Change",class:"mb-6",style:{width:"400px",opacity:".75"}},null,8,["modelValue"])])):F("",!0),Q]),g(e("div",X,[Y,e("p",{innerHTML:n(f)?j(n(f)):""},null,8,Z),e("span",ee,[(o(),r("svg",{class:"fill-current h-6 w-6 text-indigo-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",onClick:a[1]||(a[1]=s=>C())},ae))])],512),[[I,h.value]]),e("div",oe,[e("table",le,[e("thead",re,[e("tr",null,[e("th",ie,[l(m,{label:"Data",attribute:"data"})]),e("th",ne,[l(m,{label:"Person",attribute:"actor"})]),e("th",de,[l(m,{label:"Change",attribute:"audit_changes"})]),e("th",ce,[l(m,{label:"Date",attribute:"updated_at"})])])]),e("tbody",null,[(o(!0),r(P,null,O(d.audits.data,s=>(o(),r("tr",{key:s.id},[e("td",ue,[s.user_email===""?(o(),r("div",pe,p(s.data),1)):(o(),r("div",me,[g((o(),b(n(k),{style:{cursor:"pointer"},href:t.route("users.index",{_query:{search:s.user_email}})},{default:u(()=>[B(p(s.data),1)]),_:2},1032,["href"])),[[c,"Click to view user"]])]))]),e("td",he,[g((o(),b(n(k),{style:{cursor:"pointer"},href:t.route("users.index",{_query:{search:s.actor_email}})},{default:u(()=>[B(p(s.actor),1)]),_:2},1032,["href"])),[[c,"Click to view user"]])]),e("td",{class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border",innerHTML:s.audit_changes},null,8,_e),e("td",fe,p(s.updated_at),1)]))),128))])]),e("div",xe,[e("div",ye,[l(H)]),e("div",be,[l(N,{links:d.audits.links},null,8,["links"])])])])])])]),_:1})}}};export{Ce as default};
