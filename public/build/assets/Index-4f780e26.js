import{J as oe,r as v,q as R,v as ne,k as ie,O as w,d as n,b as a,w as d,F as E,o as i,a as e,u as r,s as de,l as f,m as k,f as p,g as D,t as x,y as q,x as ce}from"./app-262a2786.js";import{_ as re,a as ue}from"./AppLayout-ebba8cdf.js";import{_ as J,a as me,b as pe}from"./ItemsPerPage-63e35bdc.js";import{_ as b}from"./SecondaryButton-d3277a63.js";import{_ as F}from"./TextInput-bbe8df5b.js";import{_ as fe}from"./DangerButton-8bd23b7f.js";import{_ as O}from"./DialogModal-370dc470.js";import{_ as L}from"./InputError-5f2d5f55.js";import{_ as j}from"./InputLabel-0afd5ac9.js";import{C as he}from"./Checkbox-4bd22b28.js";import{D as ge}from"./debounce-455de282.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal-e32cf43d.js";const _e=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," AirPortal JFK Terminal 4 | Messages ",-1),xe={class:"py-4"},be={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},ye={class:"flex justify-between ml-2"},ve={class:"messages-search-text-div"},we=e("div",{class:"self-align-center ml-2 mb-2"},[e("small",null,"Search By:")],-1),ke={class:"mt-8 mr-2 messages-bulk-buttons"},Me={id:"alertnotification",class:"flex justify-end items-center scala-alert text-white text-sm font-bold px-4 py-3",role:"alert"},Ce=e("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z"})],-1),$e=["innerHTML"],Be={class:"px-4 py-3 justify-end"},Ne=e("title",null,"Close",-1),Ee=e("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"},null,-1),ze=[Ne,Ee],Se={key:0,id:"messagesTable",class:"bg-white overflow-hidden shadow-xl sm:rounded-lg messages-table"},Ve={class:"min-w-full divide-y divide-gray-200 border-separate"},De={class:"bg-gray-200 border"},Ae=e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Preview ",-1),He={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Te={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"},Fe={scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border",style:{width:"95px"}},Oe={key:0},Le=e("td",null," No data to display ",-1),je=[Le],Ue=["onClick"],Ie=e("svg",{class:"svg-icon template-preview-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M545 793.6H243.8c-11 0-20-9-20-20V250.4c0-11 9-20 20-20h432.4c11 0 20 9 20 20v131.8c0 11 9 20 20 20s20-9 20-20V250.4c0-33.1-26.9-60-60-60H243.8c-33.1 0-60 26.9-60 60v523.2c0 33.1 26.9 60 60 60H545c11 0 20-9 20-20s-8.9-20-20-20z"}),e("path",{d:"M834.6 789.8l-88.8-91.7c23.4-28.7 37.5-65.4 37.5-105.3 0-92.1-74.9-167-167-167s-167 74.9-167 167 74.9 167 167 167c37.8 0 72.7-12.6 100.7-33.9l89 91.8c3.9 4 9.1 6 14.3 6 5 0 10.1-1.9 14-5.7 7.8-7.6 8-20.3 0.3-28.2z m-218.4-69.9c-70 0-127-57-127-127s57-127 127-127 127 57 127 127-57 127-127 127zM565 382.2c0-11-9-20-20-20H308.7c-11 0-20 9-20 20s9 20 20 20H545c11.1 0 20-9 20-20zM443.5 493.5c0-11-9-20-20-20H308.7c-11 0-20 9-20 20s9 20 20 20h114.8c11.1 0 20-8.9 20-20zM308.7 584.8c-11 0-20 9-20 20s9 20 20 20h61.7c11 0 20-9 20-20s-9-20-20-20h-61.7z"})],-1),Re=[Ie],qe={key:1,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},Je=e("svg",{class:"svg-icon template-preview-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M545 793.6H243.8c-11 0-20-9-20-20V250.4c0-11 9-20 20-20h432.4c11 0 20 9 20 20v131.8c0 11 9 20 20 20s20-9 20-20V250.4c0-33.1-26.9-60-60-60H243.8c-33.1 0-60 26.9-60 60v523.2c0 33.1 26.9 60 60 60H545c11 0 20-9 20-20s-8.9-20-20-20z"}),e("path",{d:"M834.6 789.8l-88.8-91.7c23.4-28.7 37.5-65.4 37.5-105.3 0-92.1-74.9-167-167-167s-167 74.9-167 167 74.9 167 167 167c37.8 0 72.7-12.6 100.7-33.9l89 91.8c3.9 4 9.1 6 14.3 6 5 0 10.1-1.9 14-5.7 7.8-7.6 8-20.3 0.3-28.2z m-218.4-69.9c-70 0-127-57-127-127s57-127 127-127 127 57 127 127-57 127-127 127zM565 382.2c0-11-9-20-20-20H308.7c-11 0-20 9-20 20s9 20 20 20H545c11.1 0 20-9 20-20zM443.5 493.5c0-11-9-20-20-20H308.7c-11 0-20 9-20 20s9 20 20 20h114.8c11.1 0 20-8.9 20-20zM308.7 584.8c-11 0-20 9-20 20s9 20 20 20h61.7c11 0 20-9 20-20s-9-20-20-20h-61.7z"})],-1),Pe=[Je],Ye=["onClick"],Ke={key:3,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},We=["onClick"],Ge={key:5,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},Qe={class:"float-right border-none"},Xe={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",class:"scala-unlock-icon",style:{"margin-right":"4px"},width:"11",height:"11",viewBox:"0 0 16 16",fill:"none","xml:space":"preserve"},Ze=e("g",{transform:"matrix(1 0 0 -1 0 1638)"},[e("path",{d:`M16.5,1630.688h-2.484c0,0.734-0.168,1.305-0.504,1.711s-0.848,0.609-1.535,0.609c-1.336,
                                                        0-2.004-0.777-2.004-2.332v-2.801h8.578v-9.07H7.125c-0.461,0-0.855,0.164-1.184,0.492s-0.492,
                                                        0.727-0.492,1.195v7.383H7.5v2.812c0,1.406,0.43,2.594,1.289,3.562s1.93,1.453,3.211,
                                                        1.453s2.352-0.484,3.211-1.453S16.5,1632.094,16.5,1630.688z`})],-1),et=[Ze],tt={key:6,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},st=["onClick"],lt={class:"px-6 py-4 ml-3 border-none float-left"},at={class:"grid-cols-2"},ot={class:"template-pagination"},nt={class:"mt-4 ml-4 mb-4"},it={class:"mt-4 ml-4 mb-4"},dt={key:1},ct=e("p",null,"You do not have permission to access this page.",-1),rt={class:"scala-modal-notes"},ut={class:"min-w-full divide-y divide-gray-200 border-separate"},mt=e("thead",{class:"bg-gray-200 border"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Name "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Template ")])],-1),pt={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},ft={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},ht=e("span",{style:{width:"20px"}},null,-1),gt=e("span",null,"New Message",-1),_t={class:"px-2 mb-4"},xt={class:"px-2 mb-4"},bt=["value"],yt={class:"px-2"},vt=e("option",{value:"full"}," Full ",-1),wt=e("option",{value:"split"}," Split ",-1),kt=[vt,wt],Mt=e("span",{style:{width:"20px"}},null,-1),Ct={class:"scala-modal-notes"},$t=e("span",null,null,-1),Bt={class:"min-w-full divide-y divide-gray-200 border-separate"},Nt=e("thead",{class:"bg-gray-200 border"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Duplicate Name "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Message Name ")])],-1),Et={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},zt={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},St=e("span",{style:{width:"20px"}},null,-1),Jt={__name:"Index",props:{messages:{type:Object,default:()=>({})},templates:{type:Object,default:()=>({})},canReadMessages:{type:Boolean,default:()=>!1},canEditMessages:{type:Boolean,default:()=>!1},canUnlockMessages:{type:Boolean,default:()=>!1},canDeleteMessages:{type:Boolean,default:()=>!1},canAddMessages:{type:Boolean,default:()=>!1},canDuplicateMessages:{type:Boolean,default:()=>!1},canRefreshMessages:{type:Boolean,default:()=>!1},isSuperAdmin:{type:Boolean,default:()=>!1},filters:{type:Object,default:()=>({})},flash:{type:Object,default:()=>({})}},setup(o){const M=o,A=oe(),H=v(!1),P=v(!1),y=(l=null)=>{H.value=!0},Y=()=>{H.value=!1};R(A.props,function(l){l!=null&&l.flash&&l.flash.message&&y()},{immediate:!0,deep:!0});const c=ne("newMessage",{template_id:"",name:"",full_size:"full",json_data:{}}),h=ie({active:!1,allCheck:!0});let m=[];const z=v(!1);let C=[],$={};const S=v(!1);let B=[];const V=v(!1);let N=v(M.filters.search);const K=l=>{let s=l.target.parentNode.parentNode.parentNode.parentNode;if(l.target.checked==!0)m.push(parseInt(l.target.value)),s.classList.add("scala-tr-selected");else{let u=m.indexOf(parseInt(l.target.value));m.splice(u,1),s.classList.remove("scala-tr-selected")}m.length>0?h.active=!0:(h.active=!1,h.allCheck=!0,m=[])},U=l=>{document.getElementById(l).click()},I=(l=!0)=>{let s=document.querySelectorAll('input[type="checkbox"]');for(let u=0;u<s.length;u++){let t=s[u].parentNode.parentNode.parentNode.parentNode;if(h.allCheck&&l)s[u].checked=!0,m.push(parseInt(s[u].value)),t.classList.add("scala-tr-selected");else{s[u].checked=!1;let _=m.indexOf(parseInt(s[u].value));m.splice(_,1),t.classList.remove("scala-tr-selected")}}h.allCheck&&l?(document.getElementById("selectAllButton").innerText="Unselect All",h.active=!0,h.allCheck=!1):(document.getElementById("selectAllButton").innerText="Select All",m=[],h.active=!1,h.allCheck=!0)},W=()=>{h.active=!1,h.allCheck=!1,m=[],B=[],C=[],$={},I(!1)},G=()=>{M.messages.data.forEach(l=>{let s=C.indexOf(l);m.includes(l.id)?s===-1&&(C.push(l),$[l.id]=""):s>-1&&C.splice(s,1)}),z.value=!0},Q=()=>{m.length>0&&w.post(route("messages.dupe",JSON.stringify($)),{onSuccess:()=>{y("onSuccess"),g()},onFinish:()=>{y("onFinish"),g(!0)}})},X=()=>{M.messages.data.forEach(l=>{let s=B.indexOf(l);m.includes(l.id)?s===-1&&B.push(l):s>-1&&B.splice(s,1)}),S.value=!0},Z=()=>{m.length>0&&w.delete(route("messages.destroy",JSON.stringify(m)),{onSuccess:()=>{y("onSuccess"),g()},onFinish:()=>{y("onFinish"),g(!0)}})},ee=()=>{if(M.templates.length===0){alert("No templates available to create messages.");return}V.value=!0},te=()=>{c.clearErrors(),c.name==""&&(c.setError("name","Name required."),document.getElementById("name").classList.add("form-error-input")),c.template_id==""&&(c.setError("template_id","Template required."),document.getElementById("template_id").classList.add("form-error-input")),!(Object.keys(c.errors).length>0)&&c.post(route("messages.create"),{preserveScroll:!0,onError:()=>{y(),c.focus()},onSuccess:()=>g(),onFinish:()=>c.reset()})},T=l=>{w.get(route("messages.edit",l.id))},se=l=>{w.post(route("messages.unlock",l.id),{}),y()},le=l=>{},g=(l=!1)=>{S.value=!1,V.value=!1,z.value=!1,l&&W()},ae=ge(l=>{w.get("/messages",{search:l},{replace:!0})},300);return R(N,ae),w.on("success",()=>{S.value=!1,V.value=!1,z.value=!1}),(l,s)=>{const u=ce("tippy");return i(),n(E,null,[a(re,{title:"AirPortal JFK Terminal 4"},{header:d(()=>[_e]),default:d(()=>[e("div",xe,[e("div",be,[e("div",ye,[e("div",ve,[we,a(F,{id:"search",modelValue:r(N),"onUpdate:modelValue":s[0]||(s[0]=t=>de(N)?N.value=t:N=t),type:"text",placeholder:"Message Name, Template Name",class:"mb-6",style:{width:"400px",opacity:".75"},autofocus:""},null,8,["modelValue"])]),e("div",ke,[f(e("span",null,[a(b,{id:"selectAllButton",class:"scala-edit-btn slim-header-btn",disabled:Object.keys(M.messages).length===0,onClick:s[1]||(s[1]=t=>I())},{default:d(()=>[p(" Select All ")]),_:1},8,["disabled"]),a(b,{class:"scala-edit-btn slim-header-btn",disabled:h.active===!1||!o.canDuplicateMessages,onClick:s[2]||(s[2]=t=>G())},{default:d(()=>[p(" Duplicate ✓ ")]),_:1},8,["disabled"]),a(b,{class:"scala-delete-btn slim-header-btn",disabled:h.active===!1||!o.canDeleteMessages,onClick:s[3]||(s[3]=t=>X())},{default:d(()=>[p(" Delete ✓ ")]),_:1},8,["disabled"]),f(a(b,{class:"scala-edit-btn slim-header-btn",disabled:!o.canAddMessages,onClick:s[4]||(s[4]=t=>ee())},{default:d(()=>[p(" Create ")]),_:1},8,["disabled"]),[[k,o.canAddMessages]])],512),[[k,o.canEditMessages]])])]),f(e("div",Me,[Ce,e("p",{innerHTML:o.flash?o.flash.message:""},null,8,$e),e("span",Be,[(i(),n("svg",{class:"fill-current h-6 w-6 text-indigo-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",onClick:s[5]||(s[5]=t=>Y())},ze))])],512),[[k,H.value]]),o.canReadMessages?(i(),n("div",Se,[e("table",Ve,[e("thead",De,[e("tr",null,[Ae,e("th",He,[a(J,{label:"Name",attribute:"name"})]),e("th",Te,[a(J,{label:"Template",attribute:"template_name"})]),f(e("th",Fe," SELECT ",512),[[k,o.canDeleteMessages||o.canEditMessages]])])]),e("tbody",null,[!o.messages.data||!o.messages.data.length?(i(),n("tr",Oe,je)):(i(!0),n(E,{key:1},D(o.messages.data,t=>(i(),n("tr",{key:t.id,class:"cursor-pointer scala-tr"},[o.canEditMessages?f((i(),n("td",{key:0,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:_=>T(t)},Re,8,Ue)),[[u,t.locked_by!==0?"Message being edited by "+t.locked_by_email:"Click to Edit: <b>"+t.name+"</b>"]]):f((i(),n("td",qe,Pe)),[[u,"You do not have permission to edit messages."]]),o.canEditMessages?f((i(),n("td",{key:2,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:_=>T(t)},[p(x(t.name),1)],8,Ye)),[[u,t.locked_by!==0?"Message being edited by "+t.locked_by_email:"Click to Edit: <b>"+t.name+"</b>"]]):f((i(),n("td",Ke,[p(x(t.name),1)])),[[u,"You do not have permission to edit messages."]]),o.canEditMessages&&t.locked_by!==r(A).props.auth.user.id?f((i(),n("td",{key:4,class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border cursor-pointer",onClick:_=>T(t)},[p(x(t.template_name),1)],8,We)),[[u,t.locked_by!==0?"Message being edited by "+t.locked_by_email:"Click to Edit: <b>"+t.name+"</b>"]]):o.canUnlockMessages&&t.locked_by===r(A).props.auth.user.id?f((i(),n("td",Ge,[p(x(t.template_name)+" ",1),e("div",Qe,[a(b,{class:"scala-unlock-btn",style:{height:"21px !important"},onClick:_=>se(t)},{default:d(()=>[(i(),n("svg",Xe,et))]),_:2},1032,["onClick"])])])),[[u,"Click unlock button to force close your open edit."]]):f((i(),n("td",tt,[p(x(t.template_name),1)])),[[u,"You do not have permission to edit messages."]]),f((i(),n("td",{class:"border cursor-pointer",onClick:_=>U("checkbox"+t.id)},[e("div",lt,[a(he,{id:"checkbox"+t.id,value:t.id.toString(),onClick:_=>U("checkbox"+t.id),onChange:s[6]||(s[6]=_=>K(_))},null,8,["id","value","onClick"])])],8,st)),[[k,o.canDeleteMessages||o.canEditMessages],[u,{content:"Click to select message"}]])]))),128))])]),e("div",at,[e("div",ot,[e("div",nt,[a(me)]),e("div",it,[a(pe,{links:o.messages.links},null,8,["links"])])])])])):(i(),n("div",dt,[ct,a(ue,{href:l.route("planners.index",{_query:{today_only:0,search_by:"open",active_only:1,sort:"checkindesk"}}),active:l.route().current("planners.index")},{default:d(()=>[p(" Return to Main Page ")]),_:1},8,["href","active"])]))])])]),_:1}),a(O,{show:S.value,onClose:s[8]||(s[8]=t=>g())},{content:d(()=>[e("div",rt," Are you sure you want to delete "+x(r(m).length>1?"these messages?":"this message?"),1),e("table",ut,[mt,e("tbody",null,[(i(!0),n(E,null,D(r(B),t=>(i(),n("tr",{key:t.id},[e("td",pt,x(t.name),1),e("td",ft,x(t.template_name),1)]))),128))])])]),footer:d(()=>[a(b,{class:"scala-delete-btn",onClick:s[7]||(s[7]=t=>g())},{default:d(()=>[p(" NO ")]),_:1}),ht,a(fe,{disabled:!o.canDeleteMessages,onClick:Z},{default:d(()=>[p(" YES ")]),_:1},8,["disabled"])]),_:1},8,["show"]),a(O,{show:V.value,"max-width":"md",onClose:s[14]||(s[14]=t=>g())},{title:d(()=>[gt]),content:d(()=>[e("div",_t,[a(j,{for:"name",value:"Name"}),a(F,{id:"name",modelValue:r(c).name,"onUpdate:modelValue":s[9]||(s[9]=t=>r(c).name=t),name:"name",type:"text",class:"block w-full"},null,8,["modelValue"]),a(L,{message:r(c).errors.name},null,8,["message"])]),e("div",xt,[a(j,{for:"template_id",value:"Template"}),f(e("select",{id:"template_id","onUpdate:modelValue":s[10]||(s[10]=t=>r(c).template_id=t),name:"template_id",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm message-fields-modal-category block w-full",onChange:le},[(i(!0),n(E,null,D(o.templates,t=>(i(),n("option",{key:t.id,value:t.id},x(t.name),9,bt))),128))],544),[[q,r(c).template_id]]),a(L,{message:r(c).errors.template_id},null,8,["message"])]),f(e("div",yt,[a(j,{for:"full_size",value:"Full or Split"}),f(e("select",{id:"full_size","onUpdate:modelValue":s[11]||(s[11]=t=>r(c).full_size=t),name:"full_size",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm message-fields-modal-category block w-full"},kt,512),[[q,r(c).full_size]]),a(L,{message:r(c).errors.full_size},null,8,["message"])],512),[[k,P.value]])]),footer:d(()=>[a(b,{class:"scala-delete-btn",onClick:s[12]||(s[12]=t=>g(!1))},{default:d(()=>[p(" Cancel ")]),_:1}),Mt,a(b,{class:"scala-primary-btn",disabled:!o.canAddMessages,onClick:s[13]||(s[13]=t=>te(r(c)))},{default:d(()=>[p(" Create ")]),_:1},8,["disabled"])]),_:1},8,["show"]),a(O,{show:z.value,onClose:s[16]||(s[16]=t=>g())},{content:d(()=>[e("div",Ct," Please provide new names for "+x(r(m).length>1?"these messages.":"this message."),1),$t,e("table",Bt,[Nt,e("tbody",null,[(i(!0),n(E,null,D(r(C),t=>(i(),n("tr",{key:t.id},[e("td",Et,[a(F,{id:"name"+t.id,modelValue:r($)[t.id],"onUpdate:modelValue":_=>r($)[t.id]=_,name:"name",type:"text",class:"mt-2 block w-full"},null,8,["id","modelValue","onUpdate:modelValue"])]),e("td",zt,x(t.name),1)]))),128))])])]),footer:d(()=>[a(b,{class:"scala-delete-btn",onClick:s[15]||(s[15]=t=>g())},{default:d(()=>[p(" Cancel ")]),_:1}),St,a(b,{class:"scala-primary-btn",onClick:Q},{default:d(()=>[p(" Dupe ✓ ")]),_:1})]),_:1},8,["show"])],64)}}};export{Jt as default};
