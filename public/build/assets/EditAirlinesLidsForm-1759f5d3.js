import{r as b,v as L,c as M,w as i,o as E,f as c,a as e,t as x,b as l,u as a,d as S,g as T,F as z,l as Z,m as K,n as P}from"./app-262a2786.js";import{_ as X}from"./ActionMessage-10225983.js";import{_ as Y}from"./FormSection-8e6c7726.js";import{_}from"./InputError-5f2d5f55.js";import{_ as v}from"./InputLabel-0afd5ac9.js";import{_ as V}from"./PrimaryButton-a709ea04.js";import{_ as f}from"./SecondaryButton-d3277a63.js";import{_ as u}from"./TextInput-bbe8df5b.js";import{_ as B}from"./DialogModal-370dc470.js";import"./SectionTitle-9e468a0a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Modal-e32cf43d.js";const G=e("span",null,"Update Airline LIDS information.",-1),H={class:"grid-cols-1"},J={class:"mt-4 ml-6"},Q=e("span",null,"IATA:  ",-1),R={style:{"font-weight":"900"}},W={class:"ml-6"},ee=e("span",null,"ICAO:  ",-1),le={style:{"font-weight":"900"}},se={class:"ml-6"},ae=e("span",null,"Name:  ",-1),te={style:{"font-weight":"900"}},oe=["disabled"],ie={id:"EditAirlineLidsForm"},re={class:"flex"},ne={class:"col-span-6 sm:col-span-4",style:{opacity:".75"}},de={class:"col-span-6 sm:col-span-4 mt-2",style:{opacity:".75"}},ce={class:"flex"},_e={class:"col-span-6 sm:col-span-4",style:{opacity:".75"}},ue={class:"col-span-6 sm:col-span-4 mt-2",style:{opacity:".75"}},pe={class:"col-span-6 sm:col-span-4 mt-6"},me={class:"min-w-full max-w-full divide-y divide-gray-200 border-separate"},be=e("thead",{class:"bg-gray-200 border"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," LABELS "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," Delete "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-bold text-left text-gray-700 uppercase border"}," CLASS CODE ")])],-1),fe={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},ye={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},ge={class:"px-6 py-4 text-sm font-medium text-gray-800 whitespace-nowrap border"},he={class:"h-30 px-6 py-3 text-xs font-bold text-right uppercase border col-span-2"},xe={href:"/airlines"},ve=e("span",{style:{width:"20px"}},null,-1),we=e("span",null,"DELETE LABEL",-1),ke=e("span",null,"Do you really want to delete this label?",-1),Ce=e("span",{style:{width:"20px"}},null,-1),Le=e("span",null,"ADD LABEL",-1),Ee={class:"md:grid md:grid-cols-2 md:gap-6 mt-6"},Ve={class:"col-span-1 sm:col-span-1 mt-2 float-left",style:{opacity:".75"}},Ae={class:"col-span-1 sm:col-span-1 mt-2 float-left",style:{opacity:".75"}},De=e("span",{style:{width:"20px"}},null,-1),ze={__name:"EditAirlinesLidsForm",props:{airline:{type:Object,default:()=>({})},airlines_branding:{type:Object,default:()=>({})},airlines_labels_lid:{type:Object,default:()=>({})},canEditAirlines:{type:Boolean,default:()=>!1},canEditLabels:{type:Boolean,default:()=>!1},canEditBranding:{type:Boolean,default:()=>!1},canEditLogos:{type:Boolean,default:()=>!1}},setup(w){const d=w,y=b(!1),g=b(!1),p=b(!1),k=b(!1),A=b("");let t=L("editAirlines",{background_color:d.airlines_branding.lids_background_color?d.airlines_branding.lids_background_color:"",status_bar_color:d.airlines_branding.lids_status_bar_color?d.airlines_branding.lids_status_bar_color:"",airlines_labels_lids:d.airlines_labels_lid?d.airlines_labels_lid:""});const r=L({airline_id:d.airline.id,label_name:"",class_code:""});let C;const $=L({label_id:C}),U=()=>{p.value=!1,t.put(route("airlines_labels_lids.update",d.airline.id),{preserveScroll:!0,onSuccess:()=>h(t,1e4),onError:()=>h(t,1e4,!0)})},q=()=>{$.delete(route("airlines_labels_lids.destroy",C),{onSuccess:()=>h(t,2e3)})},I=()=>{p.value=!1,r.clearErrors(),r.label_name==""&&r.setError("label_name","Label required."),r.class_code==""&&r.setError("class_code","Class code required.");for(let s=0;s<d.airlines_labels_lid.length;s++)d.airlines_labels_lid[s].label==r.label_name&&r.setError("label_name","Label must be unique."),d.airlines_labels_lid[s].class_code==r.class_code&&r.setError("class_code","Class code must be unique.");Object.keys(r.errors).length>0||r.post(route("airlines_labels_lids.store"),{onSuccess:()=>h(t,2e3),onError:()=>label_name.value.focus()})},N=s=>{p.value=!1,C=s,y.value=!0},O=()=>{g.value=!0},F=s=>new Promise(n=>setTimeout(n,s)),h=async(s,n,o=!1)=>{k.value=!1,y.value||g.value?(m(),s.airlines_labels_lids=d.airlines_labels_lid):o&&(k.value=!0,A.value=s.errors.message,s.airlines_labels_lids=d.airlines_labels_lid),p.value=!0,await F(parseInt(n)),p.value=!1},m=()=>{y.value=!1,g.value=!1},j=s=>{typeof s.key>"u"?s.target.value=s.target.value.replace(/[^A-Za-z0-9.]/gi,"").toUpperCase():s.key.length==1&&(s.preventDefault(),s.target.value=s.key.replace(/[^A-Za-z0-9.]/gi,"").toUpperCase())};return(s,n)=>(E(),M(Y,{onSubmitted:U},{title:i(()=>[c(" Airline LIDS Update ")]),description:i(()=>[G,e("div",H,[e("div",J,[Q,e("span",R,x(s.$page.props.airlines_basic.iata),1)]),e("div",W,[ee,e("span",le,x(s.$page.props.airlines_basic.icao),1)]),e("div",se,[ae,e("span",te,x(s.$page.props.airlines_basic.name),1)])])]),form:i(()=>[e("fieldset",{disabled:w.canEditLabels===!1},[e("div",ie,[l(v,{for:"iata",value:"Background Color",style:{width:"300px"}}),e("div",re,[e("div",ne,[l(u,{id:"background_color_picker",modelValue:a(t).background_color,"onUpdate:modelValue":n[0]||(n[0]=o=>a(t).background_color=o),type:"color",class:"mt-4 block w-full",autocomplete:"Color",style:{width:"24px"}},null,8,["modelValue"]),l(_,{message:a(t).errors.background_color,class:"mt-2"},null,8,["message"])]),e("div",de,[l(u,{id:"background_color",modelValue:a(t).background_color,"onUpdate:modelValue":n[1]||(n[1]=o=>a(t).background_color=o),type:"text",class:"mt-1 ml-2 block w-full",autocomplete:"Color",style:{width:"300px"}},null,8,["modelValue"]),l(_,{message:a(t).errors.background_color,class:"mt-2"},null,8,["message"])])]),l(v,{for:"status_bar_color",value:"Status Bar Color",class:"mt-4",style:{width:"300px"}}),e("div",ce,[e("div",_e,[l(u,{id:"status_bar_color_picker",modelValue:a(t).status_bar_color,"onUpdate:modelValue":n[2]||(n[2]=o=>a(t).status_bar_color=o),type:"color",class:"mt-4 block w-full",autocomplete:"Color",style:{width:"24px"}},null,8,["modelValue"]),l(_,{message:a(t).errors.status_bar_color,class:"mt-2"},null,8,["message"])]),e("div",ue,[l(u,{id:"status_bar_color",modelValue:a(t).status_bar_color,"onUpdate:modelValue":n[3]||(n[3]=o=>a(t).status_bar_color=o),type:"text",class:"mt-1 ml-2 block w-full",autocomplete:"Color",style:{width:"300px"}},null,8,["modelValue"]),l(_,{message:a(t).errors.status_bar_color,class:"mt-2"},null,8,["message"])])]),e("div",pe,[e("table",me,[be,e("tbody",null,[(E(!0),S(z,null,T(a(t).airlines_labels_lids,o=>(E(),S("tr",{key:o.id},[e("td",fe,x(o.label),1),e("td",ye,[l(f,{onClick:D=>N(o.id)},{default:i(()=>[c(" X ")]),_:2},1032,["onClick"])]),e("td",ge,[l(u,{id:"status_bar_color",modelValue:o.class_code,"onUpdate:modelValue":D=>o.class_code=D,type:"text",class:"mt-2 block w-full",autocomplete:"Class Code",style:{width:"100px"},required:""},null,8,["modelValue","onUpdate:modelValue"]),l(_,{message:a(t).errors.class_code,class:"mt-2"},null,8,["message"])])]))),128)),e("tr",he,[l(f,{class:"mt-4 ml-4 mb-4",style:{width:"120px"},onClick:O},{default:i(()=>[c(" New Label ")]),_:1})])])])])])],8,oe)]),actions:i(()=>[l(X,{on:p.value,html:k.value?A.value:s.$page.props.flash.message,class:"mr-3 text-left"},null,8,["on","html"]),e("a",xe,[l(f,{type:"button"},{default:i(()=>[c(" Cancel ")]),_:1})]),ve,Z(l(V,{class:P({"opacity-25":a(t).processing}),disabled:a(t).processing},{default:i(()=>[c(" Save ")]),_:1},8,["class","disabled"]),[[K,w.canEditLabels===!0]]),l(B,{show:y.value,onClose:m},{title:i(()=>[we]),content:i(()=>[ke]),footer:i(()=>[l(f,{onClick:m},{default:i(()=>[c(" NO ")]),_:1}),Ce,l(V,{onClick:q},{default:i(()=>[c(" YES ")]),_:1})]),_:1},8,["show"]),l(B,{show:g.value,onClose:m},{title:i(()=>[Le]),content:i(()=>[e("div",Ee,[e("div",Ve,[l(v,{for:"label_name",value:"Airline Label",style:{width:"300px"}}),l(u,{id:"label_name",modelValue:a(r).label_name,"onUpdate:modelValue":n[4]||(n[4]=o=>a(r).label_name=o),type:"text",class:"mt-2 block w-full",autocomplete:"label_name",style:{width:"300px"},required:""},null,8,["modelValue"]),l(_,{message:a(r).errors.label_name,class:"mt-2"},null,8,["message"])]),e("div",Ae,[l(v,{for:"class_code",value:"Class Code",style:{width:"300px"}}),l(u,{id:"class_code",modelValue:a(r).class_code,"onUpdate:modelValue":n[5]||(n[5]=o=>a(r).class_code=o),type:"text",class:"mt-2 block w-full",autocomplete:"class_code",style:{width:"300px"},required:"",onKeyup:j},null,8,["modelValue"]),l(_,{message:a(r).errors.class_code,class:"mt-2"},null,8,["message"])])])]),footer:i(()=>[l(f,{onClick:m},{default:i(()=>[c(" CANCEL ")]),_:1}),De,l(V,{onClick:I},{default:i(()=>[c(" ADD ")]),_:1})]),_:1},8,["show"])]),_:1}))}};export{ze as default};
