import{i as se,o,d as r,a as l,D as R,b as f,w as k,j as I,e as V,z as ae,n as z,u as P,F as U,E as ie,r as _,G as X,g as D,H as oe,t as S,J as re,v as de,O,I as ne,c as ue,l as T,y as ce,s as pe,m as Y,f as B}from"./app-262a2786.js";import{S as fe}from"./SectionTitle-9e468a0a.js";import{_ as ve}from"./PrimaryButton-a709ea04.js";import{_ as q}from"./SecondaryButton-d3277a63.js";import{_ as K}from"./InputError-5f2d5f55.js";import{_ as Q}from"./InputLabel-0afd5ac9.js";import{_ as M}from"./TextInput-bbe8df5b.js";import{_ as me}from"./_plugin-vue_export-helper-c27b6911.js";import{s as ye}from"./vue-multiselect.css_vue_type_style_index_0_src_true_lang-cff1377d.js";const he={class:"player-preview-flex"},we={key:0,id:"message-preview-container-left",class:"message-preview-container"},_e={class:"player-preview-right"},ge={key:0},be={class:"player-preview-bottom mt-4"},xe=l("div",{class:"block w-full border-t border-gray-200 mb-4"},null,-1),ke={key:0,id:"message-preview-container-bottom",class:"message-preview-container"},$e={key:1,class:"message-preview-container"},Ve=["src"],Me={__name:"FormSectionPreview",props:{previewHeight:{type:Number,default:()=>540},previewWidth:{type:Number,default:()=>960},defaultPreview:{type:Boolean,default:()=>!1},defaultPreviewSlot:{type:Boolean,default:()=>!0}},emits:["submitted"],setup(i){const u=se(()=>!!ie().actions);return(y,x)=>(o(),r(U,null,[l("div",he,[l("div",{class:"player-preview-left",style:R("width: "+i.previewWidth*.5+"px;")},[f(fe,null,{title:k(()=>[I(y.$slots,"title")]),description:k(()=>[I(y.$slots,"description"),i.defaultPreviewSlot?(o(),r("div",we,[I(y.$slots,"preview")])):V("",!0)]),_:3})],4),l("div",_e,[l("form",{onSubmit:x[0]||(x[0]=ae(h=>y.$emit("submitted"),["prevent"]))},[l("div",{class:z(["px-4 py-5 bg-white sm:p-6 shadow",P(u)?"sm:rounded-tl-md sm:rounded-tr-md":"sm:rounded-md"])},[I(y.$slots,"form")],2),P(u)?(o(),r("div",ge,[I(y.$slots,"actions")])):V("",!0)],32)])]),l("div",be,[xe,!i.defaultPreview&&!i.defaultPreviewSlot?(o(),r("div",ke,[I(y.$slots,"preview")])):V("",!0),i.defaultPreview?(o(),r("div",$e,[l("div",{style:R("height: "+i.previewHeight+"px; width: "+i.previewWidth+"px;"),class:"message-preview"},[l("div",{class:z(y.containerClass)},[(o(),r("iframe",{id:"iframe",ref:"iframe",key:y.iframeUpdate,src:y.iframeSource,style:{position:"absolute",top:"0",left:"0",transform:"scale(0.5, 0.5)","transform-origin":"0% 0%"},height:"1080",width:"1920",onChange:x[1]||(x[1]=h=>y.refreshPreview())},null,40,Ve))],2)],4)])):V("",!0)])],64))}};const Se={class:"slider"},Pe=["id","value","min","max","step"],Ie=["value","min","max","step"],ze={__name:"Slider",props:{min:{type:Number,default:0},max:{type:Number,default:100},id:{type:String,default:""},step:{type:Number,default:1},modelValue:{type:Number,default:0}},emits:["update:modelValue"],setup(i,{emit:u}){const{min:y,max:x,id:h,step:s,modelValue:d}=i,c=_(d),n=_(null),g=(a,e,t)=>(a-e)/(t-e)*100,w=a=>{n.value.style.setProperty("--ProgressPercent",`${a}%`)};return X(()=>{if(n.value){u("update:modelValue",c.value);const a=g(c.value,n.value.min,n.value.max);let e=(100-a)/10;w(a+e)}}),(a,e)=>(o(),r("div",Se,[l("input",{id:i.id,value:c.value,min:i.min,max:i.max,step:i.step,type:"number",class:"input",onkeydown:"return false",style:{width:"25%","margin-right":"5%"},onInput:e[0]||(e[0]=({target:t})=>c.value=parseFloat(t.value))},null,40,Pe),l("input",{ref_key:"slider",ref:n,value:c.value,type:"range",min:i.min,max:i.max,step:i.step,class:"slider",style:{width:"65%","margin-right":"5%"},onInput:e[1]||(e[1]=({target:t})=>c.value=parseFloat(t.value))},null,40,Ie)]))}},A=me(ze,[["__scopeId","data-v-b8fe140c"]]),Ee={class:"flex"},Ue={class:"col-span-6 sm:col-span-4 mt-3 mr-2"},Be={class:"flipswitch"},Fe=["id","name","value","checked"],Ne=["for"],Le=l("div",{class:"flipswitch-inner"},null,-1),Oe=l("div",{class:"flipswitch-switch"},null,-1),je=[Le,Oe],He={class:"col-span-6 sm:col-span-4 mt-0"},We=["id","value"],De={__name:"FlipSwitch",props:{modelValue:{type:[String,Number],default:""},componentProps:{type:Object,default:()=>({})},flipOptions:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(i,{emit:u}){const{modelValue:y,componentProps:x,flipOptions:h}=i,s=_(y),d=_(null),c=s.value===h[1].value,n=c?h[1].label:h[0].label,g=()=>{d.value&&(c?s.value=h[0].value:s.value=h[1].value,u("update:modelValue",s.value))};return(w,a)=>(o(),r("div",Ee,[l("div",Ue,[l("div",Be,[l("input",{id:i.componentProps.name+"_flipswitch",ref_key:"flip",ref:d,name:i.componentProps.name+"_flipswitch",type:"checkbox",value:s.value,checked:P(c),class:"flipswitch-cb",onChange:a[0]||(a[0]=e=>g())},null,40,Fe),l("label",{for:i.componentProps.name+"_flipswitch",class:"flipswitch-label"},je,8,Ne)])]),l("div",He,[l("input",{id:i.componentProps.name,ref_key:"flip",ref:d,value:P(n),type:"text",class:"mt-1 ml-2 block w-full",style:{width:"150px"}},null,8,We)])]))}},Te={class:"item item-skinny"},Ae={key:0},Re={key:1},Ce={class:"slider"},Je={key:2},Ge=["id","name","value","type","rows","disabled","onInput"],Ye={key:3},qe=["id","name","value","disabled","onChange"],Ke=["value","selected"],Qe={key:4},Xe={class:"multiselect-multiple-label"},Ze={key:5},el={key:6},ll={class:"flex"},tl={class:"col-span-6"},sl={class:"col-span-6 mt-0"},al={key:7},il={class:"sm:p-6 shadow sm:rounded-md mt-2 bg-gray-50"},ol={key:0,class:"flex mb-3"},rl=l("div",{class:"col-span-6 mt-2 mr-2",style:{width:"55px"}}," Family: ",-1),dl={class:"col-span-6 mt-0",style:{"min-width":"132px",width:"150px"}},nl=["id","name","value","disabled","onChange"],ul=["value","selected"],cl={key:1,class:"flex mb-3"},pl=l("div",{class:"col-span-6 mt-2 mr-2",style:{width:"55px"}}," Color: ",-1),fl={class:"col-span-6 mt-0"},vl={class:"col-span-6"},ml={key:2,class:"flex mb-3"},yl=l("div",{class:"col-span-6 mt-3 mr-2",style:{width:"55px"}}," Weight: ",-1),hl={class:"col-span-6"},wl={class:"slider"},_l={key:3,class:"flex mb-3"},gl=l("div",{class:"col-span-6 mt-3 mr-2",style:{width:"55px"}}," Size: ",-1),bl={class:"col-span-6"},xl={class:"slider"},kl={key:8},$l={__name:"PlayerMessageEditor",props:{show:{type:Boolean,default:()=>!1},messageComponents:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(i,{emit:u}){const{show:y,messageComponents:x,modelValue:h}=i,s=_(h),d=_(null),c=_(s.value.airlines?s.value.airlines:[]),n=(g,w)=>{w==="add"?c.value.push(g):c.value=c.value.filter(function(a){return a.id!=g.id}),s.value.airlines=c.value};return X(()=>{d.value&&u("update:modelValue",s.value)}),(g,w)=>(o(),r(U,null,[l("div",Te,[f(Q,{for:"name",value:"Message Name"}),f(M,{id:"name",ref_key:"player",ref:d,modelValue:s.value.name,"onUpdate:modelValue":w[0]||(w[0]=a=>s.value.name=a),name:"name",type:"text",class:"mt-2 block w-full"},null,8,["modelValue"]),f(K,{message:s.value.errors.name,class:"mt-2"},null,8,["message"])]),(o(!0),r(U,null,D(i.messageComponents,(a,e)=>(o(),r("div",oe({key:e},g.$attrs,{class:a.type==="font"||a.type==="textarea"||a.type==="number"||a.type==="airlines-select"||a.type==="toggle"?"item item-fat":"item item-skinny"}),[f(Q,{for:e,value:a.label},null,8,["for","value"]),a.type==="text"?(o(),r("div",Ae,[f(M,{id:e,ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e],"onUpdate:modelValue":t=>s.value[e]=t,name:e,type:a.type,disabled:a.readonly,class:"mt-2 block w-full"},null,8,["id","modelValue","onUpdate:modelValue","name","type","disabled"])])):a.type==="number"?(o(),r("div",Re,[l("div",Ce,[f(A,{id:e,ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e],"onUpdate:modelValue":t=>s.value[e]=t,name:e,min:a.min,max:a.max,disabled:a.readonly,class:"mt-2 block w-full",step:1,onInput:({target:t})=>s.value[e]=parseFloat(t.value)},null,8,["id","modelValue","onUpdate:modelValue","name","min","max","disabled","onInput"])])])):a.type==="textarea"?(o(),r("div",Je,[l("textarea",{id:e,ref_for:!0,ref_key:"player",ref:d,name:e,value:s.value[e],type:a.type,style:{width:"100%"},rows:a.rows,disabled:a.readonly,class:"mt-2 block w-full shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",onInput:({target:t})=>s.value[e]=t.value},null,40,Ge)])):a.type==="select"?(o(),r("div",Ye,[l("select",{id:e,ref_for:!0,ref_key:"player",ref:d,name:e,value:s.value[e],disabled:a.readonly,class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-2 block w-full",onChange:({target:t})=>s.value[e]=t.value},[(o(!0),r(U,null,D(a.options,t=>(o(),r("option",{key:t.value,value:t.value,selected:t.default},S(t.label),9,Ke))),128))],40,qe)])):a.type==="airlines-select"?(o(),r("div",Qe,[f(P(ye),{id:e,ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e],"onUpdate:modelValue":t=>s.value[e]=t,name:e,disabled:a.readonly,class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm mt-2 block w-full",placeholder:"Select Airlines","track-by":"id",label:"name",options:a.options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,onSelect:w[1]||(w[1]=t=>n(t,"add")),onRemove:w[2]||(w[2]=t=>n(t,"sub"))},{selection:k(({values:t})=>[l("div",Xe,S(t.length)+" airlines selected ",1)]),_:2},1032,["id","modelValue","onUpdate:modelValue","name","disabled","options"])])):a.type==="toggle"?(o(),r("div",Ze,[f(De,{id:e,ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e],"onUpdate:modelValue":t=>s.value[e]=t,name:e,"flip-options":a.options,disabled:a.readonly,classes:"mt-2 focus:ring focus:ring-white-500 focus:ring-opacity-30 mt-2 block w-full",onChange:({target:t})=>s.value[e]=t.value},null,8,["id","modelValue","onUpdate:modelValue","name","flip-options","disabled","onChange"])])):a.type==="picker"?(o(),r("div",el,[l("div",ll,[l("div",tl,[f(M,{id:e+"_picker",ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e],"onUpdate:modelValue":t=>s.value[e]=t,type:"color",class:"mt-2 block w-full",autocomplete:"Color",disabled:a.readonly,style:{width:"24px"},onInput:({target:t})=>s.value[e]=t.value},null,8,["id","modelValue","onUpdate:modelValue","disabled","onInput"])]),l("div",sl,[f(M,{id:e,ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e],"onUpdate:modelValue":t=>s.value[e]=t,name:e,type:"text",class:"mt-1 ml-2 block w-full",autocomplete:"Primary Color",disabled:a.readonly,style:{width:"100px"},onInput:({target:t})=>s.value[e]=t.value},null,8,["id","modelValue","onUpdate:modelValue","name","disabled","onInput"])])])])):a.type==="font"?(o(),r("div",al,[l("div",il,[a.family?(o(),r("div",ol,[rl,l("div",dl,[l("select",{id:e+".family",ref_for:!0,ref_key:"player",ref:d,name:e+".family",value:s.value[e].family,disabled:a.readonly,class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",style:{"min-width":"132px",width:"150px"},onChange:({target:t})=>s.value[e].family=t.value},[(o(!0),r(U,null,D(a.family.options,t=>(o(),r("option",{key:t.value,value:t.value,selected:t.value==a.family.options.default},S(t.label),9,ul))),128))],40,nl)])])):V("",!0),a.color?(o(),r("div",cl,[pl,l("div",fl,[f(M,{ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e].color,"onUpdate:modelValue":t=>s.value[e].color=t,name:e+".color_picker",disabled:a.readonly,type:"color",class:"mt-2 block w-full",autocomplete:"Color",style:{width:"24px"},onInput:({target:t})=>s.value[e].color=t.value},null,8,["modelValue","onUpdate:modelValue","name","disabled","onInput"])]),l("div",vl,[f(M,{id:e+".color",ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e].color,"onUpdate:modelValue":t=>s.value[e].color=t,disabled:a.readonly,name:e+".color",type:"text",class:"mt-0 ml-2 block w-full",autocomplete:"Primary Color",style:{width:"100px"},onInput:({target:t})=>s.value[e].color=t.value},null,8,["id","modelValue","onUpdate:modelValue","disabled","name","onInput"])])])):V("",!0),a.weight?(o(),r("div",ml,[yl,l("div",hl,[l("div",wl,[f(A,{id:e+".weight",ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e].weight,"onUpdate:modelValue":t=>s.value[e].weight=t,disabled:a.readonly,name:e+".weight",min:a.weight.min,max:a.weight.max,step:50,onInput:({target:t})=>s.value[e].weight=parseFloat(t.value)},null,8,["id","modelValue","onUpdate:modelValue","disabled","name","min","max","onInput"])])])])):V("",!0),a.size?(o(),r("div",_l,[gl,l("div",bl,[l("div",xl,[f(A,{id:e+".size",ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e].size,"onUpdate:modelValue":t=>s.value[e].size=t,disabled:a.readonly,name:e+".size",min:a.size.min,max:a.size.max,step:1,onInput:({target:t})=>s.value[e].size=parseFloat(t.value)},null,8,["id","modelValue","onUpdate:modelValue","disabled","name","min","max","onInput"])])])])):V("",!0)])])):(o(),r("div",kl,[f(M,{id:e,ref_for:!0,ref_key:"player",ref:d,modelValue:s.value[e],"onUpdate:modelValue":t=>s.value[e]=t,disabled:a.readonly,name:e,type:a.type,class:"mt-2 block w-full",onInput:({target:t})=>s.value[e]=t.value},null,8,["id","modelValue","onUpdate:modelValue","disabled","name","type","onInput"])])),f(K,{message:i.modelValue.errors[e],class:"mt-2"},null,8,["message"])],16))),128))],64))}},Vl={class:"template-description-section"},Ml=l("span",{class:"text-lg font-medium text-gray-900"},"Template Information:",-1),Sl={class:"mt-1 ml-6"},Pl=l("span",null,[l("b",null,"Name:"),B("  ")],-1),Il={class:"capitalize"},zl={class:"ml-6"},El=l("span",null,[l("b",null,"Category:"),B("  ")],-1),Ul={class:"capitalize"},Bl={class:"ml-6"},Fl=l("span",null,[l("b",null,"Description:"),B("  ")],-1),Nl={class:"capitalize"},Ll={class:"mt-2 text-lg font-medium text-gray-900"},Ol={class:"mt-1 mb-4"},jl=l("span",{class:"text-gray-900 font-medium text-lg"},"Preview Size:  ",-1),Hl=l("option",{value:"message-preview player-preview-full"}," Full ",-1),Wl=l("option",{value:"message-preview player-preview-lg"}," Large ",-1),Dl=l("option",{value:"message-preview player-preview-md"}," Medium ",-1),Tl=l("option",{value:"message-preview player-preview-sm"}," Small ",-1),Al=[Hl,Wl,Dl,Tl],Rl={id:"alertnotification",class:"flex justify-end items-center scala-alert text-white text-sm font-bold px-1",role:"alert"},Cl=l("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[l("path",{d:"M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z"})],-1),Jl=["innerHTML"],Gl={class:"px-4 py-3 justify-end"},Yl=l("title",null,"Close",-1),ql=l("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"},null,-1),Kl=[Yl,ql],Ql={class:"flex px-4 py-3 bg-gray-50 text-right sm:px-6 shadow sm:rounded-bl-md sm:rounded-br-md"},Xl={class:"justify-start",style:{"max-width":"390px"}},Zl={class:"scala-btn-label"},et={class:"scala-btn-loader"},lt=l("svg",{id:"L3",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 100 100","enable-background":"new 0 0 0 0","xml:space":"preserve"},[l("circle",{fill:"none",stroke:"#4fa4fd","stroke-width":"4",cx:"50",cy:"50",r:"44",style:{opacity:"0.5"}}),l("circle",{fill:"#DFF0D8",stroke:"#4fa4fd","stroke-width":"3",cx:"8",cy:"54",r:"6"},[l("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 48",to:"360 50 52",repeatCount:"indefinite"})])],-1),tt=[lt],st=l("div",{class:"scala-btn-text"}," Refresh ",-1),at={class:"justify-end flex-grow"},it=["height","width"],mt={__name:"EditMessagesForm",props:{playerMessage:{type:Object,default:()=>({})},messageComponents:{type:Object,default:()=>({})},template:{type:Object,default:()=>({})},canEditMessages:{type:Boolean,default:()=>!1},canAddMessages:{type:Boolean,default:()=>!1},canRefreshMessages:{type:Boolean,default:()=>!1},formMode:{type:String,default:()=>""},flash:{type:Object,default:()=>({})}},setup(i){const u=i,y=(p,v)=>{let m=x("scalaCookies");m!=null||(m={}),m[p]=v,document.cookie="scalaCookies="+JSON.stringify(m)+"; path=/; max-age=${60 * 60 * 24 * 14};"},x=p=>{const m=`; ${document.cookie}`.split(`; ${p}=`);return m.length===2?JSON.parse(m.pop().split(";").shift()):null};re();const h=_(!1),s=_(!1),d=_(!0),c=_(u.playerMessage.appWidth);let n=null;n=de("editMessage",u.playerMessage);let g=null;u.playerMessage&&(g=u.playerMessage.id);let w=!1;const a=u.template.full_url+"?message_id="+u.playerMessage.id,e=_("message-preview player-preview-md"),t=_(null);let $=null,F=null,N=null,L=null,C="messagePreviewSize-"+u.playerMessage.id,j=x("scalaCookies");j===null&&(j={});let H=j[C];H!==null&&(H?e.value=H:e.value="message-preview player-preview-md");const W=(p=!1)=>{h.value=!0,document.getElementById("alertnotification")&&(document.getElementById("alertnotification").style="display:justify;")},Z=()=>{h.value=!1,document.getElementById("alertnotification")&&(document.getElementById("alertnotification").style="display:none;")},ee=()=>{b=!1,h.value=!1,s.value=!0,n.clearErrors(),n.put(route("messages.refresh"),{onError:()=>{W(!0),n.focus(),b=!0,s.value=!1},onSuccess:()=>{W(),w=!w,b=!0;let p=document.getElementById("message-preview-container-left");if(p)p.classList.remove("animate-pulse-slow"),p.classList.add("animate-pulse-slow");else{let v=document.getElementById("message-preview-container-bottom");v&&(v.classList.remove("animate-pulse-slow"),v.classList.add("animate-pulse-slow"))}},onFinish:()=>{s.value=!1,n.reset()}})},J=()=>{b=!1,h.value=!1,s.value=!1,O.delete(route("messages.cancel",g),{onError:()=>{W(!0),n.focus(),b=!0,s.value=!1},onSuccess:()=>{window.removeEventListener("popstate",E,!1)}})},G=p=>{switch(e.value=p,$=document.getElementsByClassName("player-preview-left")[0],F=document.getElementsByClassName("template-description-section")[0],N=document.getElementsByClassName("player-preview-flex")[0],y([C],p),p){case"message-preview player-preview-full":case"message-preview player-preview-lg":d.value=!1,$.style.width=c.value*.25+"px",F.style.width=c.value*.25+"px",N.style.minWidth=c.value*.25+330+"px",$.style.height=L-u.playerMessage.appHeight+"px";break;case"message-preview player-preview-md":d.value=!0,$.style.width=c.value*.5+"px",F.style.width=c.value*.5+"px",N.style.minWidth=c.value*.5+330+"px",$.style.height=L-u.playerMessage.appHeight*.5+"px";break;case"message-preview player-preview-sm":d.value=!0,$.style.width=c.value*.25+"px",F.style.width=c.value*.25+"px",N.style.minWidth=c.value*.25+330+"px",$.style.height=L-u.playerMessage.appHeight*.67+"px";break}},le=()=>{b=!1,u.formMode=="edit"?n.put(route("messages.update"),{onError:()=>{n.focus(),b=!0},onSuccess:()=>{n.reset(),b=!1,window.removeEventListener("popstate",E)}}):n.put(route("messages.update"),{onError:()=>{n.focus(),b=!0},onSuccess:()=>{n.reset(),b=!1,window.removeEventListener("popstate",E)}})};let te=O.page.url.indexOf("/messages/edit/")>-1||O.page.url.indexOf("/messages/create")>-1,b=!0;const E=p=>{if(te&&b)return confirm("Are you sure you want to navigate away? You will lose any changes that are not finalized!")?(J(),!0):(p.preventDefault(),!1)};return ne(()=>{$=document.getElementsByClassName("player-preview-left")[0],L=$.clientHeight,G(e.value),O.on("before",p=>{p.type!=="popstate"&&E(p)}),window.addEventListener("popstate",E)}),(p,v)=>(o(),ue(Me,{"preview-height":u.playerMessage.appHeight,"preview-width":u.playerMessage.appWidth,"default-preview":!1,"default-preview-slot":d.value,onSubmitted:le},{description:k(()=>[l("div",Vl,[Ml,l("div",Sl,[Pl,l("span",Il,S(p.$page.props.template.name),1)]),l("div",zl,[El,l("span",Ul,S(p.$page.props.template.category),1)]),l("div",Bl,[Fl,l("span",Nl,S(p.$page.props.template.description),1)]),l("div",Ll," Message ID: "+S(i.playerMessage.id),1),l("div",Ol,[jl,l("span",null,[T(l("select",{id:"preview_size","onUpdate:modelValue":v[0]||(v[0]=m=>e.value=m),name:"preview_size",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm message-fields-modal-category mt-1",onChange:v[1]||(v[1]=m=>G(m.target.value))},Al,544),[[ce,e.value]])])])])]),form:k(()=>[l("div",{ref_key:"playerMessageEditor",ref:t,class:"player-message-editor"},[f($l,{modelValue:P(n),"onUpdate:modelValue":v[2]||(v[2]=m=>pe(n)?n.value=m:n=m),"message-components":i.messageComponents,show:!0},null,8,["modelValue","message-components"])],512)]),actions:k(()=>[T(l("div",Rl,[Cl,l("p",{innerHTML:i.flash.message},null,8,Jl),l("span",Gl,[(o(),r("svg",{class:"fill-current h-6 w-6 text-indigo-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",onClick:v[3]||(v[3]=m=>Z())},Kl))])],512),[[Y,h.value]]),l("div",Ql,[l("div",Xl,[f(q,{disabled:s.value||!i.canRefreshMessages,class:z({"opacity-25":s.value,"scala-edit-btn":!0,"slim-header-btn":!0}),style:{float:"left"},onClick:v[4]||(v[4]=m=>ee())},{default:k(()=>[l("div",Zl,[T(l("div",et,tt,512),[[Y,s.value]]),st])]),_:1},8,["disabled","class"])]),l("div",at,[f(q,{disabled:s.value,class:z({"opacity-25":s.value,"scala-delete-btn":!0,"slim-header-btn":!0}),onClick:v[5]||(v[5]=m=>J())},{default:k(()=>[B(" Discard ")]),_:1},8,["disabled","class"]),f(ve,{type:"submit",class:z({"opacity-25":s.value,"scala-edit-btn":!0,"slim-header-btn":!0}),disabled:s.value},{default:k(()=>[B(" Finalize ")]),_:1},8,["class","disabled"])])])]),preview:k(()=>[l("div",{id:"message-preview",style:R("height: "+u.playerMessage.appHeight+"px; width: "+u.playerMessage.appWidth+"px;"),class:z(e.value)},[(o(),r("iframe",{id:"iframe",ref:"iframe",key:P(w),class:"iframe-preview",src:a,style:{position:"absolute",top:"0",left:"0"},height:u.playerMessage.appHeight,width:u.playerMessage.appWidth},null,8,it))],6)]),_:1},8,["preview-height","preview-width","default-preview-slot"]))}};export{mt as default};
